<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>EDM</title><meta name="generator" content="DocBook v5 XSL Stylesheets V1.72.0"></head><body alink="#0000ff" bgcolor="white" text="black" vlink="#840084" link="#0000ff">Creating index.html ...
 
<div class="book" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="id3499370"></a>EDM</h1></div><div><h2 class="subtitle">Extensible Display Manager</h2></div><div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">John</span> <span class="othername"></span> <span class="surname">Sinclair</span></h3></div></div></div><div><p class="releaseinfo">1-11</p></div><div><p class="copyright">Copyright � 2007 John Sinclair</p></div><div><div class="legalnotice"><a name="id3499448"></a><p>
	This document may be freely redistributed according to the
	terms of the GNU General Public License.
      </p></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#overview">1. Overview</a></span></dt><dd><dl><dt><span class="sect1"><a href="#id3499466">
Introduction
</a></span></dt><dt><span class="sect1"><a href="#id3499496">Other EPICS Display Managers</a></span></dt><dt><span class="sect1"><a href="#id3499542">Display Widgets</a></span></dt><dt><span class="sect1"><a href="#id3500026">Editing Features</a></span></dt></dl></dd><dt><span class="chapter"><a href="#Software-Installation">2. Software Installation</a></span></dt><dd><dl><dt><span class="sect1"><a href="#id3500165">System Requirements</a></span></dt><dt><span class="sect1"><a href="#id3500196">Installation Procedure</a></span></dt></dl></dd><dt><span class="chapter"><a href="#System-Configuration">3. System Configuration</a></span></dt><dd><dl><dt><span class="sect1"><a href="#id3500291">Location and contents of component files</a></span></dt><dd><dl><dt><span class="sect2"><a href="#id3500297">edmObjects</a></span></dt><dt><span class="sect2"><a href="#id3500420">edmPvObjects</a></span></dt></dl></dd><dt><span class="sect1"><a href="#id3500517">Color File Configuration</a></span></dt><dd><dl><dt><span class="sect2"><a href="#id3500617">Static Colors</a></span></dt><dt><span class="sect2"><a href="#id3500717">Dyanmic Colors</a></span></dt><dt><span class="sect2"><a href="#id3500718">The Color Palette and Functional Name Menu</a></span></dt><dt><span class="sect2"><a href="#id3500972">Color Aliases</a></span></dt><dt><span class="sect2"><a href="#id3501015">Alarm Colors</a></span></dt><dt><span class="sect2"><a href="#id3501057">Example Color File</a></span></dt></dl></dd><dt><span class="sect1"><a href="#id3500519">Font File Configuration</a></span></dt><dd><dl><dt><span class="sect2"><a href="#id3501129">Version 3 Font File Format</a></span></dt><dt><span class="sect2"><a href="#id3501372">Version 2 Font File Format</a></span></dt><dt><span class="sect2"><a href="#id3501395">Version 1 Font File Format</a></span></dt><dt><span class="sect2"><a href="#id3501406">Scalable Fonts</a></span></dt><dt><span class="sect2"><a href="#id3501556">Example Font File</a></span></dt></dl></dd><dt><span class="sect1"><a href="#id3501515">Printing</a></span></dt><dd><dl><dt><span class="sect2"><a href="#id3501644">The Print Definition File</a></span></dt><dt><span class="sect2"><a href="#id3501700">Directives</a></span></dt><dt><span class="sect2"><a href="#id3501721">printDialog</a></span></dt><dt><span class="sect2"><a href="#id3501761">printCommand</a></span></dt><dt><span class="sect2"><a href="#id3501794">printToFileCommand</a></span></dt><dt><span class="sect2"><a href="#id3501851">optionDefaults</a></span></dt><dt><span class="sect2"><a href="#id3501879">option</a></span></dt><dt><span class="sect2"><a href="#id3502076">Example Print Definition File</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#Program-Execution">4. Program Execution, Command Line Options, and Environment</a></span></dt><dd><dl><dt><span class="sect1"><a href="#id3502158">Execution</a></span></dt><dt><span class="sect1"><a href="#id3502212">Environment</a></span></dt><dt><span class="sect1"><a href="#id3502274">Special Purpose Environment Variables</a></span></dt><dt><span class="sect1"><a href="#id3502276">Site Specific Environment Variables</a></span></dt></dl></dd><dt><span class="chapter"><a href="#The-Project-Environment">5. The Project Environment</a></span></dt><dd><dl><dt><span class="sect1"><a href="#id3502477">Colors, Fonts, and Display Schemes</a></span></dt><dd><dl><dt><span class="sect2"><a href="#id3502487">Display Schemes</a></span></dt><dt><span class="sect2"><a href="#id3502604">Display Scheme Sets</a></span></dt></dl></dd><dt><span class="sect1"><a href="#id3502705">Location of edm component and PV component files</a></span></dt><dt><span class="sect1"><a href="#id3502735">Component Management</a></span></dt><dt><span class="sect1"><a href="#id3502736">Location of edm help files</a></span></dt><dt><span class="sect1"><a href="#id3502824">Display file search path</a></span></dt><dt><span class="sect1"><a href="#id3502847">Location of edm tmp files</a></span></dt></dl></dd><dt><span class="chapter"><a href="#PV-Types">6. PV Types</a></span></dt><dd><dl><dt><span class="sect1"><a href="#id3502866">Introduction</a></span></dt><dd><dl><dt><span class="sect2"><a href="#id3502889">EPICS - Prefix = EPICS\</a></span></dt><dt><span class="sect2"><a href="#id3502915">EPICS with put logging - Prefix = LOG\</a></span></dt><dt><span class="sect2"><a href="#id3502929">Calculation - Prefix = CALC\</a></span></dt><dt><span class="sect2"><a href="#id3502931">Local - Prefix = LOC\</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#Creating-and-Editing-Display-Windows">7. Creating and Editing Display Windows</a></span></dt><dd><dl><dt><span class="sect1"><a href="#id3503268">File Operations</a></span></dt><dd><dl><dt><span class="sect2"><a href="#id3503282">Setting the Default Working Directory</a></span></dt><dt><span class="sect2"><a href="#id3503287">Creating a New Display File</a></span></dt><dt><span class="sect2"><a href="#id3503305">Opening an Existing Display File</a></span></dt></dl></dd><dt><span class="sect1"><a href="#id3503355">Using the Mouse</a></span></dt><dd><dl><dt><span class="sect2"><a href="#id3503369">Some Definitions</a></span></dt><dt><span class="sect2"><a href="#id3503432">Simple Select Operations</a></span></dt><dt><span class="sect2"><a href="#id3503473">Multiple Select Operations</a></span></dt><dt><span class="sect2"><a href="#id3503513">Create/Edit Operations</a></span></dt><dt><span class="sect2"><a href="#id3503559">Move and Resize Operations</a></span></dt><dt><span class="sect2"><a href="#id3503611">Execute Mode Operations</a></span></dt></dl></dd><dt><span class="sect1"><a href="#id3503646">Display Window Attributes</a></span></dt><dt><span class="sect1"><a href="#id3503704">Creating Objects (except lines)</a></span></dt><dt><span class="sect1"><a href="#id3503733">Editing Objects (except lines)</a></span></dt><dt><span class="sect1"><a href="#id3503777">Creating Line Objects</a></span></dt><dt><span class="sect1"><a href="#id3503859">Editing Line Objects</a></span></dt><dt><span class="sect1"><a href="#id3503889">Aligning Objects</a></span></dt><dt><span class="sect1"><a href="#id3503993">Miscellaneous Operations</a></span></dt></dl></dd><dt><span class="chapter"><a href="#Display-Execution">8. Display Execution</a></span></dt><dt><span class="chapter"><a href="#Macro-Symbols-and-Values">9. Macro Symbols and Values</a></span></dt><dt><span class="chapter"><a href="#Internal-Symbols">10. Internal Symbols</a></span></dt><dt><span class="chapter"><a href="#EDM-and-CVS">11. EDM and CVS</a></span></dt><dt><span class="chapter"><a href="#remote-file-access">12. Remote File Access</a></span></dt><dd><dl><dt><span class="sect1"><a href="#id3504744">
Introduction
</a></span></dt><dt><span class="sect1"><a href="#id3504746">
Example Configurations
</a></span></dt><dd><dl><dt><span class="sect2"><a href="#id3504852">
Example 1 - Simple Remote Access
</a></span></dt><dt><span class="sect2"><a href="#id3504887">
Example 2 - Remote File Access Only
</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#input-filters">13. Input Filters</a></span></dt><dd><dl><dt><span class="sect1"><a href="#id3504981">
Introduction
</a></span></dt><dt><span class="sect1"><a href="#id3505021">
File Format for edmFilters
</a></span></dt><dt><span class="sect1"><a href="#id3505051">
Executable Requirements
</a></span></dt></dl></dd><dt><span class="chapter"><a href="#pv-actions">14. PV Actions</a></span></dt><dd><dl><dt><span class="sect1"><a href="#id3505072">
Introduction
</a></span></dt><dt><span class="sect1"><a href="#id3505115">
pvActions File Format
</a></span></dt></dl></dd><dt><span class="chapter"><a href="#pv-put-logging">15. PV Put Logging</a></span></dt><dd><dl><dt><span class="sect1"><a href="#id3505173">
Introduction
</a></span></dt><dt><span class="sect1"><a href="#id3505213">
Logging all PVs by default
</a></span></dt><dt><span class="sect1"><a href="#id3505288">
Logging specified PVs
</a></span></dt></dl></dd></dl></div><div class="list-of-figures"><p><b>List of Figures</b></p><dl><dt>1.1. <a href="#exampleWidgetsFigure">Example edm Widgets</a></dt><dt>3.1. <a href="#colorPaletteFigure">Example edm Color Palette</a></dt><dt>3.2. <a href="#colorMenuFigure">Example edm Color Name Menu</a></dt><dt>3.3. <a href="#badFontFigure">Poor Quality Font</a></dt><dt>3.4. <a href="#goodFontFigure">High Quality Font</a></dt><dt>3.5. <a href="#printDialogFigure">Example Print Dialog Box</a></dt><dt>5.1. <a href="#DisplaySchemeFigure">Display Schemes</a></dt></dl></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="overview"></a>Chapter�1.�Overview</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#id3499466">
Introduction
</a></span></dt><dt><span class="sect1"><a href="#id3499496">Other EPICS Display Managers</a></span></dt><dt><span class="sect1"><a href="#id3499542">Display Widgets</a></span></dt><dt><span class="sect1"><a href="#id3500026">Editing Features</a></span></dt></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3499466"></a>
Introduction
</h2></div></div></div><p>
With the introduction of tools like EPICS and VSystem, the task of building complex
distributed control systems has been greatly simplified. Furthermore, extending both the
content and functionality of these systems is a trivial task. This is generally not the case
for applications that have been built on top of these core components and in most cases
this is acceptable. There is one class of applications, namely interactive graphical display
tools, where the lack of user extensibility is a severe liability. This deficiency arrests the
growth of the suite of common display elements and prevents the development and
customization of site specific elements for special requirements. Just as EPICS record
and device support is easily extended without in-depth knowledge of the core software,
so also should the elements of a display tool be extensible, again without in-depth
knowledge of either the core behavior of the display tool or the more esoteric details of
window-based graphical user interface systems.
</p><p>
Edm, one example of an EPICS display manager, is an attempt to fulfill this objective. A
display manager is a tool that manages a collection of active displays. It provides the
ability to create and edit display content (like graphics, text, meters, sliders,
buttons, plots, etc.) and uses some facility (.e.g EPICS channel access) to execute the
same content resulting in the dynamic presentation of live data.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3499496"></a>Other EPICS Display Managers</h2></div></div></div><p>
Additional examples of display managers for EPICS include the following:
</p><div class="itemizedlist"><ul type="disc"><li><p>
medm
</p></li><li><p>
dm2k
</p></li><li><p>
edd/dm
</p></li></ul></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3499542"></a>Display Widgets</h2></div></div></div><p>
The following is a list of some of the more common edm widgets. 
</p><p>
See edm online help topic <span class="emphasis"><em>Objects</em></span> for more
information.
</p><div class="itemizedlist"><ul type="disc"><li><p>Graphics</p><div class="itemizedlist"><ul type="circle"><li><p>
    Lines
    </p></li><li><p>
    Rectangle
    </p></li><li><p>
    Circle
    </p></li><li><p>
    Arc
    </p></li><li><p>
    Static Text
    </p></li><li><p>
    GIF Image
    </p></li><li><p>
    PNG Image
    </p></li><li><p>
    HTML
    </p></li><li><p>
    Dynamic Symbols (built from graphic elements)
    </p></li></ul></div></li><li><p>Monitors</p><div class="itemizedlist"><ul type="circle"><li><p>
    Meter
    </p></li><li><p>
    Bar
    </p></li><li><p>
    Message Box
    </p></li><li><p>
    Text
    </p></li><li><p>
    Byte
    </p></li><li><p>
    X-Y Graph
    </p></li><li><p>
    Symbols (built from graphic elements)
    </p></li></ul></div></li><li><p>Controls</p><div class="itemizedlist"><ul type="circle"><li><p>
    Text
    </p></li><li><p>
    Slider
    </p></li><li><p>
    Motif Slider (medm-like)
    </p></li><li><p>
    Button
    </p></li><li><p>
    Menu Button
    </p></li><li><p>
    Choice Button
    </p></li><li><p>
    Radio Box
    </p></li><li><p>
    Message Button
    </p></li><li><p>
    Up/Down Button
    </p></li><li><p>
    Exit Button
    </p></li><li><p>
    Related Display
    </p></li><li><p>
    Shell Command
    </p></li><li><p>
    Menu Mux (multiplexor)
    </p></li><li><p>Shell Command</p></li><li><p>Multiplexor</p></li></ul></div></li></ul></div><p>
<a href="#exampleWidgetsFigure" title="Figure�1.1.�Example edm Widgets">Figure�1.1, “Example edm Widgets”</a> is a screenshot showing several display elements provided by the base widject library.
</p><div class="figure"><a name="exampleWidgetsFigure"></a><p class="title"><b>Figure�1.1.�Example edm Widgets</b></p><div class="figure-contents"><div><img src="edm_files/fig1.jpg" alt="Example edm Widgets"></div></div></div><br class="figure-break"></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3500026"></a>Editing Features</h2></div></div></div><p>
Editing functions include the following:
</p><div class="itemizedlist"><ul type="disc"><li><p>Display grid/Snap to grid</p></li><li><p>Orthogonal line draw/Orthogonal move</p></li><li><p>Copy/Cut/Paste (across different displays)</p></li><li><p>Raise/Lower</p></li><li><p>Group/Ungroup</p></li><li><p>Rotate 90/Flip</p></li><li><p>Select group PV name edit</p></li><li><p>Select group display info edit (colors/fonts)</p></li><li><p>Align select group</p></li><li><p>Center select group</p></li><li><p>Uniformly size select group</p></li><li><p>Distribute select group</p></li></ul></div><p>
<strong class="userinput"><code></code></strong>
</p><p><code class="computeroutput"></code></p><p><code class="computeroutput"></code></p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="Software-Installation"></a>Chapter�2.�Software Installation</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#id3500165">System Requirements</a></span></dt><dt><span class="sect1"><a href="#id3500196">Installation Procedure</a></span></dt></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3500165"></a>System Requirements</h2></div></div></div><p>
Motif is required to build edm. OpenMotif has been used on Linux platforms successfully.
LessTif is not currently recommended.
</p><p>
Image widgets require the following external libraries:
</p><div class="itemizedlist"><ul type="disc"><li><p>
GIF Support: libgif
</p></li><li><p>
PNG Support: libpng
</p></li></ul></div><p>
Both libraries are publically available and can be readily found from most
web search engines sites.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3500196"></a>Installation Procedure</h2></div></div></div><p>
The edm distribution is packaged in a tar file with a name like edm-1-11-0.tgz. In this
case the name corresponds to major version 1, minor version 11, and release 0.
</p><p>
Place the tar file in the src directory under the EPICS extensions directory. Use gunzip
to uncompress the file and then use tar to unpack the archive. Edm should then build like
any other EPICS extension.
</p><p>
Unlike most other EPICS extensions, edm requires additional configuration
after installation. See chapter 3 before attempting to execute edm.
</p><p>
Example:
</p><div class="procedure"><ol type="1"><li><p>gunzip edm-1-11-0.tgz</p></li><li><p>tar -xvf edm-1-11-0.tar</p></li><li><p>cd edm</p></li><li><p>make</p></li></ol></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="System-Configuration"></a>Chapter�3.�System Configuration</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#id3500291">Location and contents of component files</a></span></dt><dd><dl><dt><span class="sect2"><a href="#id3500297">edmObjects</a></span></dt><dt><span class="sect2"><a href="#id3500420">edmPvObjects</a></span></dt></dl></dd><dt><span class="sect1"><a href="#id3500517">Color File Configuration</a></span></dt><dd><dl><dt><span class="sect2"><a href="#id3500617">Static Colors</a></span></dt><dt><span class="sect2"><a href="#id3500717">Dyanmic Colors</a></span></dt><dt><span class="sect2"><a href="#id3500718">The Color Palette and Functional Name Menu</a></span></dt><dt><span class="sect2"><a href="#id3500972">Color Aliases</a></span></dt><dt><span class="sect2"><a href="#id3501015">Alarm Colors</a></span></dt><dt><span class="sect2"><a href="#id3501057">Example Color File</a></span></dt></dl></dd><dt><span class="sect1"><a href="#id3500519">Font File Configuration</a></span></dt><dd><dl><dt><span class="sect2"><a href="#id3501129">Version 3 Font File Format</a></span></dt><dt><span class="sect2"><a href="#id3501372">Version 2 Font File Format</a></span></dt><dt><span class="sect2"><a href="#id3501395">Version 1 Font File Format</a></span></dt><dt><span class="sect2"><a href="#id3501406">Scalable Fonts</a></span></dt><dt><span class="sect2"><a href="#id3501556">Example Font File</a></span></dt></dl></dd><dt><span class="sect1"><a href="#id3501515">Printing</a></span></dt><dd><dl><dt><span class="sect2"><a href="#id3501644">The Print Definition File</a></span></dt><dt><span class="sect2"><a href="#id3501700">Directives</a></span></dt><dt><span class="sect2"><a href="#id3501721">printDialog</a></span></dt><dt><span class="sect2"><a href="#id3501761">printCommand</a></span></dt><dt><span class="sect2"><a href="#id3501794">printToFileCommand</a></span></dt><dt><span class="sect2"><a href="#id3501851">optionDefaults</a></span></dt><dt><span class="sect2"><a href="#id3501879">option</a></span></dt><dt><span class="sect2"><a href="#id3502076">Example Print Definition File</a></span></dt></dl></dd></dl></div><p>
The following items need to be configured after installation.
</p><div class="itemizedlist"><ul type="disc"><li><p>
Contents and location of component files
</p></li><li><p>
Content and location of color file
</p></li><li><p>
Content and location of font file
</p></li><li><p>
Contents of print definition file
</p></li></ul></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3500291"></a>Location and contents of component files</h2></div></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3500297"></a>edmObjects</h3></div></div></div><p>
Edm uses a registry that maps widgets to a class name and shareable
library path. The registry is contained in a file named edmObjects
which resides in /etc/edm or the directory pointed to by the environment
variable EDMOBJECTS.
</p><p>
When edm is installed, an example edmObjects file is included as part of the
installation but this file should not be used in
the production edm environment. Instead, a new file should be created
by edm itself. This is accomplished as follows:
</p><div class="itemizedlist"><ul type="disc"><li><p>
Choose a location for the edmObjects file, make EDMOBJECTS point to
this location, and make sure you have write access.
</p></li><li><p>
Locate each edm component library. After the build, these reside in
.../extensions/lib/(ARCH DEPENDENT)/ and, except for libEdmBase.so,
they all have uuid-like names (however, not all files so named are
component files).
</p><p>
Example names:
</p><p>
libEdmBase.so
</p><p>
lib7e1b4e6f-239d-4650-95e6-a040d41ba633.so
</p><p>
You may verify that a library is an edm component file as the following
example illustrates:
</p><p>
edm -show /usr/local/src/epics/supTop/R3.13.6/extensions/lib/Linux/libEdmBase.so
</p></li></ul></div><div class="itemizedlist"><ul type="disc"><li><p>
For each component library file, execute edm with the -add option
as follows:
</p><p>
edm -add (full absolute path to library)/(library name)
</p><p>
e.g. edm -add /usr/local/src/epics/supTop/R3.13.6/extensions/lib/Linux/libEdmBase.so
</p></li></ul></div><p>
After populating edmObjects in this manner, you may wish to manually manage
it with a text editor. If so, the number of objects at the top
must match the number of registry entries. The directory location
references may be replaced with the environment variable EDMLIBS. The
following shows two equivalent entries (assuming, of course, that EDMLIBS
has been set to /epics/extensions/lib/linux-x86).

</p><div class="itemizedlist"><ul type="disc"><li><p>
activeLineClass /epics/extensions/lib/linux-x86/libEdmBase.so Graphics Lines
</p></li><li><p>
activeLineClass $(EDMLIBS)/libEdmBase.so Graphics Lines
</p></li></ul></div><p>
The use of the EDMLIBS variable allows different versions of edm to
reference the same edmObjects file.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3500420"></a>edmPvObjects</h3></div></div></div><p>
A similar exercise needs to be performed for a PV component registry file.
In this case the environment variable is EDMPVOBJECTS, the file is
edmPvObjects, and the only library is libEpics.so.
</p><p>
Do the following:
</p><div class="itemizedlist"><ul type="disc"><li><p>
Choose a location for the edmPvObjects file, make EDMPVOBJECTS point to
this location, and make sure you have write access.
</p></li><li><p>
Locate the edm pv component library. After the build, this file reside in
.../extensions/lib/(ARCH DEPENDENT)/ and is named libEpics.so.
</p><p>
You may verify that a library is an edm pv component file as the following
example illustrates:
</p><p>
edm -showpv /usr/local/src/epics/supTop/R3.13.6/extensions/lib/Linux/libEpics.so
</p></li></ul></div><div class="itemizedlist"><ul type="disc"><li><p>
Add the pv component library to the registry file as follows:
</p><p>
edm -addpv (full absolute path to library)/(library name)
</p><p>
e.g. edm -addpv /usr/local/src/epics/supTop/R3.13.6/extensions/lib/Linux/libEpics.so
</p></li></ul></div><p>
Everyone will probably want to load the three libraries as shown in the
following (the location of files will be site dependent).
</p><div class="itemizedlist"><ul type="disc"><li><p>
edm -addpv /usr/local/src/epics/supTop/R3.13.6/extensions/lib/Linux/libEpics.so
</p></li><li><p>
edm -addpv /usr/local/src/epics/supTop/R3.13.6/extensions/lib/Linux/libLoc.so
</p></li><li><p>
edm -addpv /usr/local/src/epics/supTop/R3.13.6/extensions/lib/Linux/libCalc.so
</p></li></ul></div></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3500517"></a>Color File Configuration</h2></div></div></div><p>
The edm color file must be manually created using a text editor. The file
name is normally <span class="emphasis"><em>colors.list</em></span> and the default location is
<span class="emphasis"><em>/etc/edm</em></span>. The location may be overridden
on a site-by-site or project-by-project basis with the environment
variable <span class="emphasis"><em>EDMFILES</em></span>. The name and location may be
overridden on a site-by-site or project-by-project basis with the environment
variable <span class="emphasis"><em>EDMCOLORFILE</em></span>.
</p><p>
The first line of the color file must contain the color file format
version id as three numbers corresponding to major, minor, and release.
This should currently be
</p><pre class="programlisting">4 0 0
</pre><p>
The next three items in the color file are described as follows:
</p><div class="itemizedlist"><ul type="disc"><li><p>The blink period given in milliseconds, e.g.</p><pre class="programlisting">blinkms=750
</pre></li><li><p>The number of columns in the color palette, e.g.</p><pre class="programlisting">columns=5
</pre></li><li><p>The maximum number of RGB component values (256 or 65536), e.g.</p><pre class="programlisting">max=0x10000
</pre><p>This is one more than the largest value that may be specified for any RGB
component.</p></li></ul></div><p>
So, the first few lines of the colors.list file might look like this
</p><pre class="programlisting">4 0 0

blinkms=750
max=0x10000
columns=5
</pre><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3500617"></a>Static Colors</h3></div></div></div><p>
Edm stores and references colors as indices rather than RGB values. Colors
can be selected visually or functionally, i.e. from a palette of colors or
from a menu of color names.
The edm color file establishes this mapping of index to RGB and functional
name. In this manner, a list of static colors are specified.
</p><p>
An example static color declaration is shown below:
</p><pre class="programlisting">static 25  Controller    { 0 0 65535 }    # blue

# blinking is specified by 2 RGB values
static 26  "blinking red"  { 65535 0 0 41120 0 0 }
</pre><p>
In this example, note the following:
</p><div class="itemizedlist"><ul type="disc"><li><p>The first color's index is 25 and functional name is
<span class="emphasis"><em>Controller</em></span>.</p></li><li><p>The second color's index is 26 and functional name is
<span class="emphasis"><em>blinking red</em></span>.</p></li><li><p>The name <span class="emphasis"><em>Controller</em></span> could have been enclosed
in quotes but this is not necessary.</p></li><li><p>The name <span class="emphasis"><em>blinking red</em></span> must be enclosed
in quotes and, in general, this is true for any color name containing
white space.</p></li><li><p>Comments are introduced by the <span class="emphasis"><em>#</em></span> character and
may be placed anywhere but on the very first line of the color file.</p></li></ul></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3500717"></a>Dyanmic Colors</h3></div></div></div><p>
In addition,
another list of dynamic colors may be included where the mapping is index
to color rule and name. A color rule is an expression that maps a color
name to a set of RGB values depending on the range of an associated color
PV. A color rule might look like the following:</p><pre class="programlisting">rule 100 exampleRule {
 =100 || =200 : strange
 &gt;=20         : invisible
 &gt;0 &amp;&amp; &lt;10    : red
 &gt;=10 &amp;&amp; &lt;20  : "blinking red"
 default      : green
}
</pre><p>In this example, note the following:</p><div class="itemizedlist"><ul type="disc"><li><p>The color index is 100 and the functional name is exampleRule.</p></li><li><p><span class="emphasis"><em>invisible</em></span> is a color name with special behavior
that causes some widgets to disappear (the widget must support invisibility
by color). Even though the color name <span class="emphasis"><em>invisible</em></span> is
special, it must nevertheless be defined as a static color. The specified
RGB value is utilized by widgets that do not support invisibility by color.
</p></li><li><p>The names <span class="emphasis"><em>strange</em></span>, <span class="emphasis"><em>invisible</em></span>,
<span class="emphasis"><em>red</em></span>, <span class="emphasis"><em>blinking red</em></span>,
and <span class="emphasis"><em>green</em></span> must be valid color names defined elsewhere
in the color file</p></li><li><p>Rule evaluation goes from top to bottom, stopping at the first true
condition. The default clause must therefore come last.</p></li><li><p>Symbols</p><div class="itemizedlist"><ul type="circle"><li><pre class="programlisting">=   equal to</pre></li><li><pre class="programlisting">&gt;   greater than</pre></li><li><pre class="programlisting">&gt;=  greater than or equal to</pre></li><li><pre class="programlisting">&lt;   less than</pre></li><li><pre class="programlisting">&lt;=  less than or equal to</pre></li><li><pre class="programlisting">||  logical or</pre></li><li><pre class="programlisting">&amp;&amp;  logical and</pre></li></ul></div></li></ul></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3500718"></a>The Color Palette and Functional Name Menu</h3></div></div></div><p>
The color palette shown in <a href="#colorPaletteFigure" title="Figure�3.1.�Example edm Color Palette">Figure�3.1, “Example edm Color Palette”</a> and color name menu in
<a href="#colorMenuFigure" title="Figure�3.2.�Example edm Color Name Menu">Figure�3.2, “Example edm Color Name Menu”</a> corresponds to the following color file
information:
</p><pre class="programlisting">4 0 0

blinkms=750
max=0x10000
columns=5

static 6   white        { 0xffff 0xffff 0xffff }
static 7   black        { 0 0 0 }
static 8   grey1        { 50000 50000 50000 }
static 9   grey2        { 40000 40000 40000 }
static 3   "dark red"   { 0xffff 0 0 }
static 4   "dark green" { 0 0xffff 0 }
static 5   "dark blue"  { 0 0 0xffff }
static 0   red          { 0xffff 0 0 }
static 1   green        { 0 0xffff 0 }
static 2   blue         { 0 0 0xffff }

menumap { 
red
green
blue
"dark red"
"dark green"
"dark blue"
}
</pre><p>
Note that there are 5 columns as given by
</p><pre class="programlisting">columns=5</pre><p> and that the palette is
populated from top-left to bottom-right, row by row, according to the
entry order of color indices in the color file. So,
<span class="emphasis"><em>white</em></span> is the first specified color in the file
and also the first color in the palette. Likewise, <span class="emphasis"><em>blue</em></span>
is last in both places.
</p><div class="figure"><a name="colorPaletteFigure"></a><p class="title"><b>Figure�3.1.�Example edm Color Palette</b></p><div class="figure-contents"><div><img src="edm_files/colorPalette.png" alt="Example edm Color Palette"></div></div></div><br class="figure-break"><p>
The listing order in the color name menu is explicitly given in the
<span class="emphasis"><em>menumap</em></span> section of the color file. This is clear by
comparing the menumap content to the menu shown in
<a href="#colorMenuFigure" title="Figure�3.2.�Example edm Color Name Menu">Figure�3.2, “Example edm Color Name Menu”</a>.
Note that some colors have been intentionally omitted from the menu.
</p><div class="figure"><a name="colorMenuFigure"></a><p class="title"><b>Figure�3.2.�Example edm Color Name Menu</b></p><div class="figure-contents"><div><img src="edm_files/colorMenu.png" alt="Example edm Color Name Menu"></div></div></div><br class="figure-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3500972"></a>Color Aliases</h3></div></div></div><p>
Some widgets, like the X-Y plot, require many default colors. Instead
of referencing color names or indices (which may not exist at a given site),
they instead reference color aliases. The X-Y plot uses the following color
alias names: <span class="emphasis"><em>trace0</em></span>, <span class="emphasis"><em>trace1</em></span>, ...
<span class="emphasis"><em>trace13</em></span>.
</p><p>
These color alias names are included in the color file to establish
this mapping for a given configuration. An example is shown below.
</p><pre class="programlisting">alias trace0 red
alias trace1 green
alias trace2 blue
alias trace3 "dark red"
alias trace4 "dark green"
alias trace5 "dark blue"
alias trace6 black
alias trace7 white
alias trace8 grey1
alias trace9 grey2
alias trace10 wheat
alias trace11 cornflower
alias trace12 coral
alias trace13 "med orchid"
</pre></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3501015"></a>Alarm Colors</h3></div></div></div><p>
The <span class="emphasis"><em>alarm</em></span> section of the color file maps color names
into EPICS alarm states. An example is given below.
</p><pre class="programlisting">alarm { 
  disconnected : grey1
  invalid      : grey2
  minor        : blue
  major        : red
  noalarm      : green
}
</pre><p>
In this case, all alarm sensitive content in the <span class="emphasis"><em>noalarm</em></span>
state is shown as green.
</p><p>
The following causes alarm sensitive content in the
<span class="emphasis"><em>noalarm</em></span> state to be rendered with user specified colors:
</p><pre class="programlisting">alarm { 
  disconnected : grey1
  invalid      : grey2
  minor        : blue
  major        : red
  noalarm      : *
}
</pre></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3501057"></a>Example Color File</h3></div></div></div><p>
The following is an example of an entire edm color file.
</p><pre class="programlisting">4 0 0

blinkms=750
max=0x10000
columns=5

alias trace0 red
alias trace1 green
alias trace2 blue
alias trace3 "dark red"
alias trace4 "dark green"
alias trace5 "dark blue"
alias trace6 black
alias trace7 white
alias trace8 grey1
alias trace9 grey2
alias trace10 wheat
alias trace11 cornflower
alias trace12 coral
alias trace13 "med orchid"

static 6   white        { 0xffff 0xffff 0xffff }
static 7   black        { 0 0 0 }
static 8   grey1        { 50000 50000 50000 }
static 9   grey2        { 40000 40000 40000 }
static 3   "dark red"   { 0xafff 0 0 }
static 4   "dark green" { 0 0xafff 0 }
static 5   "dark blue"  { 0 0 0xafff }
static 0   red          { 0xffff 0 0 }
static 1   green        { 0 0xffff 0 }
static 2   blue         { 0 0 0xffff }
static 10  "wheat"      { 55512 55512 49087 }
static 11  "cornflower" { 16962 16962 28527 }
static 12  "coral"      { 65535 46003 13107 }
static 13  "med orchid" { 37779 28784 56283 }
static 14  "blink red"  { 0xffff 0 0 0x3fff 0 0 }
static 15  invisible    { 0 0 0 }

rule 16 rule1 {
 =100 || =200 : grey1
 &gt;=20         : invisible
 &gt;0 &amp;&amp; &lt;10    : red
 &gt;=10 &amp;&amp; &lt;20  : "blink red"
 default      : green
}

menumap { 
red
green
blue
"dark red"
"dark green"
"dark blue"
rule1
}

alarm { 
  disconnected : grey1
  invalid      : grey2
  minor        : blue
  major        : red
  noalarm      : *
}
</pre></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3500519"></a>Font File Configuration</h2></div></div></div><p>
The edm font file must be manually created using a text editor. The file
name is always <span class="emphasis"><em>fonts.list</em></span> and the default location is
<span class="emphasis"><em>/etc/edm</em></span>. The location may be overridden
on a site-by-site or project-by-project basis with the environment
variable <span class="emphasis"><em>EDMFILES</em></span>. The name and location may be
overridden on a site-by-site or project-by-project basis with the environment
variable <span class="emphasis"><em>EDMFONTFILE</em></span>.
</p><p>
All edm fonts must be explicitly specified in the font file.
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3501129"></a>Version 3 Font File Format</h3></div></div></div><p>
The version 3 font file format accomodates blank lines and comment lines.
Comment lines must contain '#' as the first non white-space character.
</p><p>
The first line of the font file must
contain the file version id as three numbers corresponding to
major, minor, and release. Currently, this should be
</p><pre class="programlisting">3 0 0
</pre><p>
The next two lines in the font file are default font tags that are used
to resolve unknown font references. The lines look something like the
following:
</p><pre class="programlisting">helvetica-medium-r-10.0
helvetica-medium-r-12.0
</pre><p>
The first tag, in this example helvetica-medium-r-10.0, is used as a substitute
for an invalid font referenced in a display file.
</p><p>
The second tag, in this example helvetica-medium-r-18.0, is used as a default
font for creating new text when no default has been specified. Specifying a
default font is described elsewhere.
</p><p>
The remaining lines specify available fonts. The information is the same as for
previous file versions but the form is highly condensed and the font
name may now be arbitrarily assigned (previously, the font family mapped
directly to the font name).
</p><p>
Note that for all font file versions, blanks in font specification lines
are significant and may not be used as separators.
</p><p>
Using the previous file formats, the following lines would specify 8, 10,
and 12 point courier fonts. Notice the four groups of three sizes.
</p><pre class="programlisting">-*-courier-bold-o-normal--8-80-75-75-m-50-*-*
-*-courier-bold-o-normal--10-100-75-75-m-60-*-*
-*-courier-bold-o-normal--12-120-75-75-m-70-*-*
-*-courier-bold-r-normal--8-80-75-75-m-50-*-*
-*-courier-bold-r-normal--10-100-75-75-m-60-*-*
-*-courier-bold-r-normal--12-120-75-75-m-70-*-*
-*-courier-medium-o-normal--8-80-75-75-m-50-*-*
-*-courier-medium-o-normal--10-100-75-75-m-60-*-*
-*-courier-medium-o-normal--12-120-75-75-m-70-*-*
-*-courier-medium-r-normal--8-80-75-75-m-50-*-*
-*-courier-medium-r-normal--10-100-75-75-m-60-*-*
-*-courier-medium-r-normal--12-120-75-75-m-70-*-*
</pre><p>
The version 3 file format specifies all this information on one line
and the font name is independent of the font specification. The
equivalent version 3 content is shown below.
</p><pre class="programlisting">courier=-*-courier-(medium,bold)-(r,o)-normal--*-(80,100,120)-75-75-m-*-*-*
</pre><p>
Note that the <span class="emphasis"><em>weight</em></span> option must be listed in the
order (&lt;non-bold&gt;,&lt;bold&gt;). Likewise the <span class="emphasis"><em>slant</em></span> option
must be ordered as (&lt;non-italicized&gt;,&lt;italicized&gt;).
</p><p>
For example, the <span class="emphasis"><em>gothic</em></span> font would be specified as
follows:
</p><pre class="programlisting">gothic=-urw-gothic l-(book,demi bold)-(r,o)-normal--0-(80,100,120)-75-75-p-0-*-*
</pre><p>
In this case, the weight modifiers are book (non-bold) and demi bold (bold). The
slant modifiers are r (non-italicized) and o (oblique, i.e. italicized).
</p><p>
Appending at least one tab and the keyword <span class="emphasis"><em>preload</em></span> to
the font spec line instructs edm to preload the font during initialization.
</p><pre class="programlisting">courier=-*-courier-(medium,bold)-(r,o)-normal--*-(80,100,120)-75-75-m-*-*-*      preload
</pre><p>
Another keyword that may be specified is <span class="emphasis"><em>exact</em></span>. This
option requires that all fonts match the font specification exactly.
The default policy is to allow another font to be used if the desired font
cannot be resolved. As before, use a tab character as whitespace to separate
keywords from one another and from the font spec.
</p><pre class="programlisting">courier=-*-courier-(medium,bold)-(r,o)-normal--*-(80,100,120)-75-75-m-*-*-*      preload      exact
</pre><p>
The above example, where the font name is the same as the family name,
makes the content compatable with previous file versions. The same font could
be renamed as given below.
</p><pre class="programlisting">edm courier font=-*-courier-(medium,bold)-(r,o)-normal--*-(80,100,120)-75-75-m-*-*-*
</pre><p>
Of course, the actual intent is to change the font spec and keep the name
unchanged. For example, suppose the free Microsoft
<span class="emphasis"><em>courier new</em></span> scalable font is installed. An existing font given as
</p><pre class="programlisting">courier=-*-courier-(medium,bold)-(r,o)-normal--*-(80,100,120)-75-75-m-*-*-*
</pre><p>
could be changed to
</p><pre class="programlisting">courier=-microsoft-courier new-(medium,bold)-(r,o)-normal--0-(80,100,120)-75-75-m-0-*-*
</pre><p>
All existing edm screens would now use the new font.
</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="id3501332"></a>Font Groups</h4></div></div></div><p>
Version 3 files support the notion of font groups where each group
contains one font name and multiple fonts specs. An example is shown
below.
</p><pre class="programlisting">helvetica={
-urw-helvetica-(medium,bold)-(r,o)-normal--0-(80,100,120)-75-75-m-0-*-*      preload
-adobe-helvetica-(medium,bold)-(r,o)-normal--*-(80,100,120)-75-75-m-*-*-*    preload
-*-helvetica-(medium,bold)-(r,o)-normal--*-(80,100,120)-75-75-m-*-*-*        preload
}
</pre><p>
In this example, edm will first try to use the scalable urw font
found in most Linux distributions. If an exact match cannot be made,
the adobe font will be tried next. Finally any helvetica font will
be tried.
</p><p>
If all font resolution attempts fail, and if the last font spec of the group
does not include the <span class="emphasis"><em>exact</em></span> option, it will be used to generate a
fallback set of fonts, some of which may be members of a different
font family. If even this strategy fails, edm will abort.
</p></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3501372"></a>Version 2 Font File Format</h3></div></div></div><p>
Version 2 is equivalent to version 1 with the following exceptions:
</p><div class="itemizedlist"><ul type="disc"><li><p>
The first line is 2 0 0.
</p></li><li><p>
One or more tabs and the keyword <span class="emphasis"><em>preload</em></span> may be
appended to a font specification. This instructs edm to preload the
font during initialization.
</p></li></ul></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3501395"></a>Version 1 Font File Format</h3></div></div></div><p>
The version 1 font file format is somewhat inflexible. Neither blank lines
nor comments of any kind are allowed. The first line of the font file must
contain the file version id as three numbers corresponding to
major, minor, and release. Currently, this should be
</p><pre class="programlisting">1 1 0
</pre><p>
The next two lines in the font file are default font tags that are used
in case a font referenced in a display file has not been specified in
the font file. This might be the case if a file has been obtained from
some external site. The lines look something like the following:
</p><pre class="programlisting">helvetica-medium-r-10.0
helvetica-medium-r-12.0
</pre><p>
The first tag, in this example helvetica-medium-r-10.0, is used as a substitute
for an invalid font referenced in a display file.
</p><p>
The second tag, in this example helvetica-medium-r-18.0, is used as a default
font for creating new text when no default has been specified. Specifying a
default font is described elsewhere.
</p><p>
The remaining lines specify fonts, family by family, four groups of font
specifications on separate lines, in repeated blocks for each of the equivalent
of bold-italic, bold-normal, medium-italic, and medium-normal.
</p><p>
So, for example, the following lines would specify 8, 10, and 12 point
courier fonts. Notice the four groups of three sizes.
</p><pre class="programlisting">-*-courier-bold-o-normal--8-80-75-75-m-50-*-*
-*-courier-bold-o-normal--10-100-75-75-m-60-*-*
-*-courier-bold-o-normal--12-120-75-75-m-70-*-*
-*-courier-bold-r-normal--8-80-75-75-m-50-*-*
-*-courier-bold-r-normal--10-100-75-75-m-60-*-*
-*-courier-bold-r-normal--12-120-75-75-m-70-*-*
-*-courier-medium-o-normal--8-80-75-75-m-50-*-*
-*-courier-medium-o-normal--10-100-75-75-m-60-*-*
-*-courier-medium-o-normal--12-120-75-75-m-70-*-*
-*-courier-medium-r-normal--8-80-75-75-m-50-*-*
-*-courier-medium-r-normal--10-100-75-75-m-60-*-*
-*-courier-medium-r-normal--12-120-75-75-m-70-*-*
</pre><p>
If desired, scalable fonts may be specified as follows.
</p><pre class="programlisting">-*-courier-bold-r-normal--0-90-75-75-m-0-*-*
</pre></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3501406"></a>Scalable Fonts</h3></div></div></div><p>
In general, it is not possible to guarantee that high quality scalable fonts
will be used when appropriate. But if the actual family name of
the desired scalable font is used in the spec, it obviously will be.
<a href="#badFontFigure" title="Figure�3.3.�Poor Quality Font">Figure�3.3, “Poor Quality Font”</a> shows the rendering on a linux system of
a 72 point New Century Schoolbook font specified as
</p><pre class="programlisting">-*-new century schoolbook-bold-r-normal--0-720-75-75-p-0-*-*
</pre><p>
Clearly, the font renders, but the quality is poor.
</p><div class="figure"><a name="badFontFigure"></a><p class="title"><b>Figure�3.3.�Poor Quality Font</b></p><div class="figure-contents"><div><img src="edm_files/badFont.png" alt="Poor Quality Font"></div></div></div><br class="figure-break"><p>
In <a href="#goodFontFigure" title="Figure�3.4.�High Quality Font">Figure�3.4, “High Quality Font”</a>, when the font is specified as
</p><pre class="programlisting">-urw-new century schoolbook-bold-r-normal--0-720-75-75-p-0-*-*
</pre><p>
The nice scalable font is used and the results are much more pleasing.
</p><div class="figure"><a name="goodFontFigure"></a><p class="title"><b>Figure�3.4.�High Quality Font</b></p><div class="figure-contents"><div><img src="edm_files/goodFont.png" alt="High Quality Font"></div></div></div><br class="figure-break"></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3501556"></a>Example Font File</h3></div></div></div><p>
The following is an example of an entire edm font file. This would
make 8, 10, 12 and 72 point courier and helvetica fonts available.
</p><pre class="programlisting">1 1 0
helvetica-medium-r-10.0
helvetica-medium-r-12.0
-*-courier-bold-o-normal--8-80-75-75-m-50-*-*
-*-courier-bold-o-normal--10-100-75-75-m-60-*-*
-*-courier-bold-o-normal--12-120-75-75-m-70-*-*
-*-courier-bold-o-normal--0-720-75-75-m-0-*-*
-*-courier-bold-r-normal--8-80-75-75-m-50-*-*
-*-courier-bold-r-normal--10-100-75-75-m-60-*-*
-*-courier-bold-r-normal--12-120-75-75-m-70-*-*
-*-courier-bold-r-normal--0-720-75-75-m-0-*-*
-*-courier-medium-o-normal--8-80-75-75-m-50-*-*
-*-courier-medium-o-normal--10-100-75-75-m-60-*-*
-*-courier-medium-o-normal--12-120-75-75-m-70-*-*
-*-courier-medium-o-normal--0-720-75-75-m-0-*-*
-*-courier-medium-r-normal--8-80-75-75-m-50-*-*
-*-courier-medium-r-normal--10-100-75-75-m-60-*-*
-*-courier-medium-r-normal--12-120-75-75-m-70-*-*
-*-courier-medium-r-normal--0-720-75-75-m-0-*-*
-*-helvetica-bold-o-normal--8-80-75-75-p-50-*-*
-*-helvetica-bold-o-normal--10-100-75-75-p-60-*-*
-*-helvetica-bold-o-normal--12-120-75-75-p-69-*-*
-*-helvetica-bold-o-normal--0-720-75-75-p-0-*-*
-*-helvetica-bold-r-normal--10-100-75-75-p-60-*-*
-*-helvetica-bold-r-normal--12-120-75-75-p-70-*-*
-*-helvetica-bold-r-normal--0-720-75-75-p-0-*-*
-*-helvetica-bold-r-normal--8-80-75-75-p-50-*-*
-*-helvetica-medium-o-normal--10-100-75-75-p-57-*-*
-*-helvetica-medium-o-normal--12-120-75-75-p-67-*-*
-*-helvetica-medium-o-normal--0-720-75-75-p-0-*-*
-*-helvetica-medium-o-normal--8-80-75-75-p-47-*-*
-*-helvetica-medium-r-normal--10-100-75-75-p-56-*-*
-*-helvetica-medium-r-normal--12-120-75-75-p-67-*-*
-*-helvetica-medium-r-normal--0-720-75-75-p-0-*-*
-*-helvetica-medium-r-normal--8-80-75-75-p-46-*-*
</pre><p>
Note that the fonts do not have to specified in size order (see
...helvetica-bold-r-normal--8... above) but all variants must be
included for each size (bold-italic, bold-normal, medium-italic,
medium-normal).
</p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3501515"></a>Printing</h2></div></div></div><p>
Printing in edm depends on external utilities like those found in the
netpbm distribution (formerly libgr-progs). A print definition file
is used to specify template print commands and to relate print
options to print dialog box fields.
</p><p>
The following command might be used from a Linux shell to print a window:
</p><div class="itemizedlist"><ul type="disc"><li><p>
xwd | xwdtopnm | pnmdepth 255 | pnmtops -center | lpr -P lp
</p></li></ul></div><p>
The above command could be used in the edm print definition file verbatim. The
corresponding directive follows.
</p><div class="itemizedlist"><ul type="disc"><li><p>
  printCommand = "xwd | xwdtopnm | pnmdepth 255 | pnmtops -center | lpr -P lp"
</p></li></ul></div><p>
The problem with the above example is the lack of options like
page size, portrait/landscape, a list of print queues, and so on. Furthermore,
the xwd command shown above requires user interaction to select the
window to be dumped. The edm print definition file allows options to be
specified and related to fields in a print dialog box.
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3501644"></a>The Print Definition File</h3></div></div></div><p>
The following rules are used to locate the edm print defintion file:
</p><div class="itemizedlist"><ul type="disc"><li><p>
If the environment variable EDMPRINTDEF is defined, its value is taken
as the full name, including path, of the print defintion file.
</p></li><li><p>
If EDMPRINTDEF is unset and EDMFILES is defined, then the file edmPrintDef
in the directory given by EDMFILES is used.
</p></li><li><p>
If EDMPRINTDEF and EDMFILES are both unset, the file /etc/edm/edmPrintDef
is used.
</p></li></ul></div><p>
If the print defintion file does not exist or is invalid, printing is
disabled and the print menu item is inactive.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3501700"></a>Directives</h3></div></div></div><p>
The following directives may appear in any order. Blank lines and
comment lines starting with # are ignored.
</p><div class="itemizedlist"><ul type="disc"><li><p>
printDialog (optional) - gives the maximum width and height of the dialog box
</p></li><li><p>
printCommand (required) - gives command used to print to a printer
</p></li><li><p>
printToFileCommand (required) - gives command used to print to a file
</p></li><li><p>
optionDefaults (optional) - specifies print command option defaults
</p></li><li><p>
option &lt;number&gt; (optional) - specifies a print dialog field and command option
modifier
</p></li></ul></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3501721"></a>printDialog</h3></div></div></div><p>
The printDialog directive has a simple form as shown below:
</p><div class="itemizedlist"><ul type="disc"><li><p>
printDialog {
  w = 400
  h = 500
}
</p></li></ul></div><p>
The line "w = 400" sets the maximum dialog box width to 400 pixels and
"h = 500" sets the maximum height to 500 pixels.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3501761"></a>printCommand</h3></div></div></div><p>
The printCommand directive includes legal shell commands and parameters. It
is used when <span class="emphasis"><em>Print To File</em></span> is not selected. An example
follows.
</p><div class="itemizedlist"><ul type="disc"><li><p> printCommand =
"xwd -display &lt;DSPNAME&gt; -id &lt;WINID&gt; | xwdtopnm | pnmdepth
255 | pnmtops &lt;opt1&gt; | lpr &lt;opt2&gt;"
</p><p>
&lt;WINID&gt; translates to the XWindow ID of the window
from which the print menu item was selected.
</p><p>
&lt;DSPNAME&gt; translates to the current X Window display name
</p><p>
&lt;optN&gt; translates to the value of the Nth option
where N ranges from 1 to 10.
</p></li></ul></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3501794"></a>printToFileCommand</h3></div></div></div><p>
The printToFileCommand directive includes legal shell commands and parameters.
It is used when <span class="emphasis"><em>Print To File</em></span> is selected. An example
follows.
</p><div class="itemizedlist"><ul type="disc"><li><p>printToFileCommand
= "xwd -display &lt;DSPNAME&gt; -id &lt;WINID&gt; | xwdtopnm | pnmdepth
255 | pnmtops &lt;opt1&gt; &gt; &lt;file&gt;"
</p><p>
&lt;WINID&gt; translates to the XWindow ID of the window
from which the print menu item was selected.
</p><p>
&lt;DSPNAME&gt; translates to the current X Window display name
</p><p>
&lt;optN&gt; translates to the value of the Nth option
where N ranges from 1 to 10.
</p><p>
&lt;file&gt; translates to the filename specified in
the print dialog box by the user.
</p></li></ul></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3501851"></a>optionDefaults</h3></div></div></div><p>
Options are stored as strings. The directive optionDefaults gives the initial
value of the option strings.
</p><div class="itemizedlist"><ul type="disc"><li><p>
optionDefaults {

  opt1 = ""
  opt2 = ""

}
</p></li></ul></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3501879"></a>option</h3></div></div></div><p>
The option directive has the following general form:
</p><pre class="programlisting">option <span class="emphasis"><em>N</em></span> = <span class="emphasis"><em>&lt;DIALOG FIELD TYPE&gt;</em></span> {
  label = "<span class="emphasis"><em>&lt;LABEL STRING&gt;</em></span>"

  default = <span class="emphasis"><em>&lt;DEFAULT DIALOG FIELD VALUE&gt;</em></span>

  <span class="emphasis"><em>&lt;OPTION STRING MODIFIERS&gt;</em></span>

}
</pre><p>
The option attributs (label, default, modifiers) must be given in
the order shown in the above example.
</p><p>
If <span class="emphasis"><em>&lt;DIALOG FIELD TYPE&gt;</em></span> is menu, a string of
menu items follow as shown below:
</p><pre class="programlisting">option <span class="emphasis"><em>N</em></span> = menu "item1|item2|item3..." {
  .
  .
  .
</pre><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="id3501936"></a>Dialog Field Type = menu</h4></div></div></div><p>
For the <span class="emphasis"><em>menu</em></span> type, default is given as a number
from 0 to n-1, where n is the number of items in the menu string.
</p><p>
Option string modifiers have the following form:
</p><pre class="programlisting">  <span class="emphasis"><em>N</em></span> option [ = | += ] "&lt;OPTION STRING VALUE&gt;"

  e.g. to replace current option with "-noturn"
  0 option = "-noturn"

  to append "-noturn" to the current option
  0 option += "-noturn"
</pre><p>
A complete example follows.
</p><pre class="programlisting">option 2 orientation = menu "Default|Portrait|Landscape" {

  label = "Orientation"

  default = 0

  0 option += ""

  1 option += "-noturn"

  2 option += "-turn"

}
</pre></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="id3501980"></a>Dialog Field Type = toggle</h4></div></div></div><p>
The <span class="emphasis"><em>toggle</em></span> type is much like the <span class="emphasis"><em>menu</em></span>
type. As before, default is given as a number, but for
the <span class="emphasis"><em>toggle</em></span> type, the number must be 0 or 1.
</p><p>
Option string modifiers have the following form:
</p><pre class="programlisting">  [ 0 | 1 ] option [ = | += ] "&lt;OPTION STRING VALUE&gt;"

  e.g. to replace current option with "-center"
  0 option = "-center"

  to append "-center" to the current option
  0 option += "-center"
</pre><p>
A complete example follows.
</p><pre class="programlisting">option 2 center = toggle {

  label = "Center"

  default = 1

  0 option += "-nocenter"

  1 option += "-center"

}
</pre></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="id3502025"></a>Dialog Field Type = text</h4></div></div></div><p>
For the <span class="emphasis"><em>text</em></span> type, default is given as a string.
</p><p>
In this case the option is modified by the
<span class="emphasis"><em>option string modifier</em></span> concatenated
with the text entry value specified by the user. If a space
should separated the two, it must be included at the end of
the <span class="emphasis"><em>option string modifier</em></span>.
</p><p>
The single option string modifier has the following form:
</p><pre class="programlisting">  option [ = | += ] "&lt;OPTION STRING VALUE&gt;"

  e.g. to replace current option with "-width " (and the user input)
  option = "-width "

  to append "-width " (and the user input) to the current option
  option += "-width "
</pre><p>
A complete example follows.
</p><pre class="programlisting">option 2 pagewidth = text {

  label = "Page Width"

  default = "8.5"

  option += "-width "

}
</pre></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3502076"></a>Example Print Definition File</h3></div></div></div><pre class="programlisting">Note:

  If the environment variable EDMDEBUGMODE is set to 1,
  the print command will be displayed when a print
  operation is performed.
</pre><p>
A complete example edm print definition file is shown below. Figure
<a href="#printDialogFigure" title="Figure�3.5.�Example Print Dialog Box">Figure�3.5, “Example Print Dialog Box”</a> shows the corresponding print
dialog box.
</p><pre class="programlisting">printDialog {
  w = 400
  h = 600
}

printCommand = "xwd &lt;opt1&gt; | xwdtopnm | pnmdepth 255 &lt;opt4&gt; | pnmtops &lt;opt2&gt; &lt;opt3&gt; | lpr &lt;opt5&gt;"

printToFileCommand = "xwd &lt;opt1&gt; | xwdtopnm | pnmdepth 255 &lt;opt4&gt; | pnmtops &lt;opt2&gt; &lt;opt3&gt; &gt; &lt;file&gt;"

optionDefaults {
  opt1 = "-display &lt;DSPNAME&gt; "
  opt2 = ""
  opt3 = ""
  opt4 = ""
  opt5 = ""
}

option 2 orientation = menu "Default|Portrait|Landscape" {
  label = "Orientation"
  default = 0
  0 option += ""
  1 option += "-noturn"
  2 option += "-turn"
}

option 2 pagewidth = text {
  label = "Page Width"
  default = "8.5"
  option += "-width "
}

option 2 pageheight = text {
  label = "Page Height"
  default = "11"
  option += "-height "
}

option 3 scale = text {
  label = "Scale Factor"
  default = "1"
  option += "-scale "
}

option 3 center = toggle {
  label = "Center"
  default = 1
  0 option += "-nocenter"
  1 option += "-center"
}

option 3 fit = toggle {
  label = "Fit To Page"
  default = 0
  0 option += ""
  1 option = "-center -scale 1000"
}

option 4 invert = toggle {
  label = "Invert"
  default = 0
  0 option += ""
  1 option += "| pnminvert"
}

option 1 select = menu "Window|Desktop|Interactive" {
  label = "Select"
  default = 0
  0 option += "-silent -id &lt;WINID&gt;"
  1 option += "-silent -root"
  2 option += "-frame"
}

option 5 printer = menu "lp|lp0" {
  label = "Printer"
  default = 0
  0 option = "-P lp"
  1 option = "-P lp0"
}
</pre><div class="figure"><a name="printDialogFigure"></a><p class="title"><b>Figure�3.5.�Example Print Dialog Box</b></p><div class="figure-contents"><div><img src="edm_files/printDialog.png" alt="Example Print Dialog Box"></div></div></div><br class="figure-break"></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="Program-Execution"></a>Chapter�4.�Program Execution, Command Line Options, and Environment</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#id3502158">Execution</a></span></dt><dt><span class="sect1"><a href="#id3502212">Environment</a></span></dt><dt><span class="sect1"><a href="#id3502274">Special Purpose Environment Variables</a></span></dt><dt><span class="sect1"><a href="#id3502276">Site Specific Environment Variables</a></span></dt></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3502158"></a>Execution</h2></div></div></div><pre class="programlisting">edm [-x] [-noedit] [-ro] [-noscrl] [-m &lt;"m1=string1,m2=string2,..."&gt;]
    [-display &lt;display name&gt;] [-ctl &lt;control PV name&gt;]
    [-color rgb or index] [-cmap] [-restart] [-server] [-one] [-open]
    [-port &lt;port #&gt;] [-local] [-eolc] [-(v|V|version)] [-(h|help)]
    [&lt;display-file1 display-file2 ...&gt;]

    -x       Open all displays in execute rather than edit mode

    -noedit  Remove capability to put display in edit mode, used
             with -x to produce execute only operation

    -ro      Read-only mode (when the -server option is in use,
             this option affects the primary server only;
             clients inherit this attribute from the server)

    -noscrl  Disable scroll bars

    -m       Introduces list of macros/expansions

               e.g. -m "facility=beamline-5,section=z"

    -display Takes name of X Display

    -ctl     Takes name of string process variable, writing
             a display file name to this string causes edm
             to open the display in execute mode

             Writing "* SHUTDOWN *" to the pv invokes a remote
             shutdown; edm writes its pid back into the same pv

    -color   Set Colormode - index (default) or rgb

    -cmap    Use private colormap if necessary

    -restart Takes pid number, restart from last shutdown

    -server  Communicate with or become a
             display file server which can
             manage multiple displays

    -one     Like -server but allows only one instance of edm
             per display; all instances must be launched with
             this option and all other options except -display
             should be identical

    -open    Request server to open specified files; macros may
             be set; a server must exist and must already be
             managing the corresponding display otherwise the
             request will be ignored

    -port #  Use specified TCP/IP port number (default=19000);
             may be used with -server and -one options

    -local   Do not communicate with the display
             file server (default)

    -eolc    Exit on last close; edm exits when last screen is closed

    -version Displays edm version information and exits
    -v
    -V

    -help    Displays this text and exits
    -h
    -?

COMPONENT MANAGEMENT

edm (-add|-remove|-show) &lt;component library file pathname&gt;

    -add     Add all library components to edmObjects

    -remove  Remove all library components from edmObjects

    -show    Show all components in specified library

               e.g. edm -add /usr/lib/someEdmComponents.so

PV COMPONENT MANAGEMENT

edm (-addpv|-removepv|-showpv) &lt;PV component library file pathname&gt;

    -addpv     Add all library components to edmPvObjects

    -removepv  Remove all library components from edmPvObjects

    -showpv    Show all components in specified library

               e.g. edm -addpv /usr/lib/someEdmPvComponents.so
</pre></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3502212"></a>Environment</h2></div></div></div><pre class="programlisting">ENVIRONMENT VARIABLES

EDMFILES                Location of fonts.list and colors.list
                        (if unset then /etc/edm) if EDMCOLORFILE
                        and EDMFONTFILE are unset

EDMCOLORFILE            Name and location of color file

EDMFONTFILE             Name and location of font file

EDMHELPFILES            Location of edm help displays
                        (if unset then /etc/edm)

EDMOBJECTS              Location of edmObjects, the edm component
                        object file (if unset then /etc/edm)

EDMPVOBJECTS            Location of edmPvObjects, the edm PV component
                        object file
                        (if unset then /etc/edm)

EDMDATAFILES            Location of display files given as

                          &lt;path 1&gt;:&lt;path 2&gt;:...:&lt;path n&gt;
                          e.g. /usr/displays:/usr/more:/usr/yetMore

                          If EDMDATAFILES is not set then default
                          path is ./

EDMSERVERS              Comma separated list of server names

                        &lt;server1&gt;[:merit],&lt;server2&gt;[:merit]...
                        e.g. node1:2,node2:1.5,node3
                        (node1 is preffered 2/1.5, 2/1 over nodes 2 &amp; 3)

EDMTMPFILES             Location of autosave files (default: /tmp)

EDMPRINTDEF             Name of print defintion file; if unset the file
                        edmPrintDef in the directory given by EDMFILES
                        is used. If EDMFILES is unset, the file
                        /etc/edm/edmPrintDef is used.

EDMUSERLIB              Location of user shared library file (future)

EDMCOMMENTS             Path to comment file (see chapter on EDM and CVS).

EDMHTTPDOCROOT          URL list separated by "|".

CALC_ENV                Colon delimited list of CALC pv definition files

EDMPRINTER              Default printer

EDMDUMPFILES            Location for xygraph widget plot file dumps

EDMACTIONS              Location of edmActions file

EDMTEXTBORDERALWAYS     If set, and noalarm is not "*", then always display text alarm borders

</pre><p>
If this environment variable is set, file access is performed using libcurl
and edm must be compiled with the -DUSECURL=1 option. This results in a
list of document root locations, each of which are searched to resolve
a file reference. All directories given in EDMFILES and EDMUSERFILES are
relative to the document root locations.
</p><p>
This gives a locally executed instance of edm read-only access to display files
on a web server. Color files, font files, and png images are also obtained from
the remote server. Currently, gif files may not be remotely accessed (this
will change in a future release).
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3502274"></a>Special Purpose Environment Variables</h2></div></div></div><p>
The following environment variables are not intended for use during
normal operation of edm.
</p><pre class="programlisting">EDMCOLORMODE            Set to rgb or RGB to enable rgb color mode
</pre><p>
Help files employ rgb color mode to make display file colors somewhat site
independent. When an edl file is written in rbg mode, colors are stored
as raw R-G-B values instead of as the usual color indices. When a file written
in this mode is opened, colors are chosen from the palette that best match
the stored R-G-B values.
</p><pre class="programlisting">EDMSUPERVISORMODE       Set to TRUE to enable supervisor mode
</pre><p>
Several widgets employ an optional password protected confirmation
mechanism as a prerequisite to performing some operation. This is
not secure and serves primarily to remind the user that some operation
is not without significant consequences. These widgets also provide a
<span class="emphasis"><em>LOCK</em></span> option that disables all functional widget
properties (e.g. what PV will be written, what value will be written)
and inhibits further password modification. Once the <span class="emphasis"><em>LOCK</em></span>
option is selected and the file saved, the widget remains locked
permanently (of course, one could simply edit the ascii edl file).
Setting EDMSUPERVISORMODE to TRUE unconditionally unlocks all such
widgets.
</p><pre class="programlisting">EDMDEBUGMODE            Set to any integer value to enable debug mode
EDMDIAGNOSTICMODE       Set to any integer value to enable diagnostics
</pre><p>
For developer use.
</p><pre class="programlisting">EDMXSYNC                Puts X in sync mode
</pre><p>
This is intended for use when testing or debugging edm. X I/O
throughput is significantly degraded in this mode.
</p><pre class="programlisting">EDMGENDOC               Generates widget file format information
                        on save
</pre><p>
Setting this environment variable makes edm generate widget file format
information when a display file is saved. The output is sent to stdout.
This gives up-to-date information to those writing display generating
scripts and such.
</p><p>
Example output for rectangle widget:
</p><pre class="programlisting"># (Rectangle)
object activeRectangleClass
beginObjectProperties
major &lt;int&gt;
minor &lt;int&gt;
release &lt;int&gt;
x &lt;int&gt;
y &lt;int&gt;
w &lt;int&gt;
h &lt;int&gt;
lineColor (index &lt;int&gt; | rgb &lt;int&gt; &lt;int&gt; &lt;int&gt;)
[lineAlarm [(0|1)]]   /* present with no value = 1, absent = 0 */
[fill [(0|1)]]   /* present with no value = 1, absent = 0 */
fillColor (index &lt;int&gt; | rgb &lt;int&gt; &lt;int&gt; &lt;int&gt;)
[fillAlarm [(0|1)]]   /* present with no value = 1, absent = 0 */
[lineWidth &lt;int&gt;]   /* default = 1 */
[lineStyle ("solid"|"dash")]   /* default = "solid" */
[invisible [(0|1)]]   /* present with no value = 1, absent = 0 */
[alarmPv &lt;expandable string&gt;] /* default = "" */
[visPv &lt;expandable string&gt;] /* default = "" */
[visInvert [(0|1)]]   /* present with no value = 1, absent = 0 */
[visMin &lt;string&gt;] /* default = "" */
[visMax &lt;string&gt;] /* default = "" */
endObjectProperties
</pre><p>
Conventions:
</p><pre class="programlisting">\a translates to a
\\ translates to \

So, for example, to specify a local pv, use LOC\\somepv

[a] means a is optional

(a | b) means either "a" or "b"

Arrays are specified as follows:

  a {
    0 1
    1 100
  }

In this case, a is an array of 2 elements, element 0 = 1,
element 1 = 100.

Primitive types are enclosed by "&lt;" and "&gt;". The following means
a takes an integer value.

  a &lt;int&gt;

Primitive types include

  &lt;int&gt;
  &lt;real&gt;
  &lt;string&gt;
  &lt;expandable string&gt; (i.e. macros are allowed)

Strings and expandable strings should be enclosed in double quotes
</pre></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3502276"></a>Site Specific Environment Variables</h2></div></div></div><p>
The following environment variables are site related.
</p><pre class="programlisting">EDMWEBBROWSER           name of executable that invokes web browser
</pre><pre class="programlisting">EDMRDDHS                Used by TRIUMF for site-specific initialization
                        in the related display widget
</pre></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="The-Project-Environment"></a>Chapter�5.�The Project Environment</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#id3502477">Colors, Fonts, and Display Schemes</a></span></dt><dd><dl><dt><span class="sect2"><a href="#id3502487">Display Schemes</a></span></dt><dt><span class="sect2"><a href="#id3502604">Display Scheme Sets</a></span></dt></dl></dd><dt><span class="sect1"><a href="#id3502705">Location of edm component and PV component files</a></span></dt><dt><span class="sect1"><a href="#id3502735">Component Management</a></span></dt><dt><span class="sect1"><a href="#id3502736">Location of edm help files</a></span></dt><dt><span class="sect1"><a href="#id3502824">Display file search path</a></span></dt><dt><span class="sect1"><a href="#id3502847">Location of edm tmp files</a></span></dt></dl></div><p>
The environment for a given project is determined by a group of files
and environment variables. The following considerations are addressed:
</p><div class="itemizedlist"><ul type="disc"><li><p>
Definition of the project colors, fonts, calculations, and display schemes
</p></li><li><p>
Location of edm component and PV component files
</p></li><li><p>
Component management
</p></li><li><p>
Location of edm help files
</p></li><li><p>
Display file search path
</p></li><li><p>
Location of edm tmp files (.e.g for autosave)
</p></li></ul></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3502477"></a>Colors, Fonts, and Display Schemes</h2></div></div></div><p>
The environment variable EDMFILES determines the location of all related
files. If EDMFILES is not set, /etc/edm is used. Color and font configuration
and content specifics have been given elsewhere in this document so this
section will only discuss display schemes in detail.
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3502487"></a>Display Schemes</h3></div></div></div><p>
Display schemes determine the default colors and fonts used when creating
widgets in a given display. The display scheme consists of the cosmetic
properties shown in the display property dialog box which may be obtained
by middle-clicking on a edm display (while in edit mode) and selecting
<span class="emphasis"><em>Display Properties</em></span> from the menu.
<a href="#DisplaySchemeFigure" title="Figure�5.1.�Display Schemes">Figure�5.1, “Display Schemes”</a> shows this property box and correlates
the various color names with their respective uses in a slider widget.
</p><div class="figure"><a name="DisplaySchemeFigure"></a><p class="title"><b>Figure�5.1.�Display Schemes</b></p><div class="figure-contents"><div><img src="edm_files/displayScheme.png" alt="Display Schemes"></div></div></div><br class="figure-break"><p>
When a new edm display file is created, the display scheme information
is populated from the file named <span class="emphasis"><em>default.scheme</em></span>
located in $EDMFILES.
One task in configuring the project environment is therefore creating this
file. This is done as follows:
</p><div class="itemizedlist"><ul type="disc"><li><p>
Execute edm and create a new display
</p></li><li><p>
Middle-click on the display background and select
<span class="emphasis"><em>Display Properties</em></span> from the menu
</p></li><li><p>
Set the various display scheme properties as desired (Text Fg, 1st Control Fg,
2nd Control Fg, 1st Control Bg, 2nd Control Bg, Top Shadow, Bottom Shadow,
Default Text Font, Default Control Font, Default Button Font)
</p></li><li><p>
Press the OK button to close the dialog box
</p></li><li><p>
Middle-click on the display background and select
<span class="emphasis"><em>Save Display Scheme...</em></span> from the menu
</p></li><li><p>
Save the file <span class="emphasis"><em>default.scheme</em></span> in the appropriate
directory (as given by $EDMFILES)
</p></li><li><p>
Exit edm now, don't save the display; when you next start edm the display
scheme will be properly set.
</p></li></ul></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3502604"></a>Display Scheme Sets</h3></div></div></div><p>
A single display scheme is sometimes not adequate. It may be useful to have
a separate scheme for each widget or multiple schemes, one per group of
widgets per sub-system. This is possible but requires manual configuration.
</p><p>
The file <span class="emphasis"><em>schemes.list</em></span> in $EDMFILES associates
a scheme set name with each edm widget over some number of scheme sets.
For example, suppose you have three sub-systems named
<span class="emphasis"><em>front</em></span>, <span class="emphasis"><em>middle</em></span>, and
<span class="emphasis"><em>back</em></span>. Furthermore, suppose you only care about
rectangles, sliders, and text entry widgets. Configuration consists of
two steps
</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="id3502643"></a>Step 1</h4></div></div></div><p>
Manually create (tediously) one scheme file per widget per sub-system.
These could be named front-rec.scheme, middle-rec.scheme, back-rec.scheme,
front-sli.scheme, middle-sli.scheme, back-sli.scheme,
front-te.scheme, middle-te.scheme, and back-te.scheme.
</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="id3502658"></a>Step 2</h4></div></div></div><p>
Create the file (with a text editor) <span class="emphasis"><em>schemes.list</em></span> in
$EDMFILES with the following contents:
</p><pre class="programlisting">front {
  Graphics-activeRectangleClass front-rec
  Controls-activeSliderClass    front-sli
  Controls-activeXTextDspClass  front-te
}
middle {
  Graphics-activeRectangleClass middle-rec
  Controls-activeSliderClass    middle-sli
  Controls-activeXTextDspClass  middle-te
}
back {
  Graphics-activeRectangleClass back-rec
  Controls-activeSliderClass    back-sli
  Controls-activeXTextDspClass  back-te
}
</pre><p>
The component type-name (e.g. Graphics-activeRectangleClass) may be discovered
by examining the file <span class="emphasis"><em>edmObjects</em></span>, the location of
which is given by the environment variable $EDMOBJECTS (or /etc/edm if
$EDMOBJECTS is not set).
</p><p>
Once this file is created, a scheme set may be selected by
Middle-clicking on the display background and selecting
<span class="emphasis"><em>Select Scheme Set</em></span> from the menu and then
selecting the scheme set name from the sub-menu.
</p></div></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3502705"></a>Location of edm component and PV component files</h2></div></div></div><p>
The edm widget component file, <span class="emphasis"><em>edmObjects</em></span>, resides
in the directory given by $EDMOBJECTS or in /etc/edm if the environment
variable is not set.
</p><p>
The edm PV component file, <span class="emphasis"><em>edmPvObjects</em></span>, resides
in the directory given by $EDMPVOBJECTS or in /etc/edm if the environment
variable is not set. This file supports an obsolete class of generic
PV objects and will not be further discussed. A future version of edm
will use this file to manage the generic PV objects currently in use.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3502735"></a>Component Management</h2></div></div></div><p>
Edm widgets are distributed as independent component packages. This serves
as a quality control device and prevents a new, but perhaps unstable, component
from affecting the stability of a previous configuration. The new component
may be installed, tested, and subsequently, if a problem arises, uninstalled
without any code modification.
</p><p>
As an example, consider the following html component which happens to
be packaged separately. The library file name is libHtml.so.
</p><p>
The package contents may be viewed as follows:
</p><p><strong class="userinput"><code>
edm -show /myPath/libHtml.so 
</code></strong></p><pre class="programlisting">Edm component file is ./edmObjects

Component                                 Menu Type    Menu Text

html                                      Graphics     html
</pre><p>
The package may be installed as follows:
</p><p><strong class="userinput"><code>
edm -add /myPath/libHtml.so 
</code></strong></p><pre class="programlisting">

Edm component file is ./edmObjects

Adding component: html, menu type: Graphics, menu text: html

Moving current edm component file to ./edmObjects~

The new component has been successfully added
</pre><p>
The package may be uninstalled as follows:
</p><p><strong class="userinput"><code>
edm -remove /myPath/libHtml.so 
</code></strong></p><pre class="programlisting">

Edm component file is ./edmObjects

Removing component: html

Moving current edm component file to ./edmObjects~
Component was successfully removed
</pre><p>
Notice than in each command, the library file reference includes an
absolute path. This is a strict requirement.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3502736"></a>Location of edm help files</h2></div></div></div><p>
Edm help files reside in the directory given by $EDMHELPFILES or in
/etc/edm if the environment variable is not set.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3502824"></a>Display file search path</h2></div></div></div><p>
The environment variable EDMDATAFILES is a colon separated list of
directories. This list is searched in the given order whenever an edm
display file is referenced in a related display widget and also whenever
a symbol or graphical image file is refenced in some associated widget.
</p><p>
If the environment variable is not set, the current directory is
used as the search path.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3502847"></a>Location of edm tmp files</h2></div></div></div><p>
Edm tmp files reside in the directory given by $EDMTMPFILES or in
/tmp if the environment variable is not set.
</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="PV-Types"></a>Chapter�6.�PV Types</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#id3502866">Introduction</a></span></dt><dd><dl><dt><span class="sect2"><a href="#id3502889">EPICS - Prefix = EPICS\</a></span></dt><dt><span class="sect2"><a href="#id3502915">EPICS with put logging - Prefix = LOG\</a></span></dt><dt><span class="sect2"><a href="#id3502929">Calculation - Prefix = CALC\</a></span></dt><dt><span class="sect2"><a href="#id3502931">Local - Prefix = LOC\</a></span></dt></dl></dd></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3502866"></a>Introduction</h2></div></div></div><p>
Several different PV types are supported by edm widgets. Currently, supported
types include EPICS, LOG, CALC, and LOC.
</p><p>
Support for each pv type is specified in the file named edmPvObjects. The
default pv type is the one which appears in the file first (not including LOC
and CALC).
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3502889"></a>EPICS - Prefix = EPICS\</h3></div></div></div><p>
The default PV type is usually EPICS and even when this is the case, a PV
reference may include the prefix <span class="emphasis"><em>EPICS\</em></span>. So, when
referring to a default PV type, assumed to be EPICS in this case, the names
<span class="emphasis"><em>EPICS\somePv</em></span> and <span class="emphasis"><em>somePv</em></span> are
equivalent.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3502915"></a>EPICS with put logging - Prefix = LOG\</h3></div></div></div><p>
This pv type is identical to EPICS with added support for put logging. See
the chapter on PV put logging for more information.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3502929"></a>Calculation - Prefix = CALC\</h3></div></div></div><p>
A CALC PV must include the <span class="emphasis"><em>CALC\</em></span> prefix. For example,
a legal CALC PV name is CALC\somePv and this is distinctly different from
the simple name somePv (an EPICS PV).
</p><p>
CALC PVs may work in conjunction with a global configuration file which
must be named calc.list and, for a production system, must reside in the
location pointed to by $EDMFILES. If calc.list resides in the current
directory it will be utilized in place of the one in $EDMFILES. This
behavior facilitates development but obviously introduces a deployment
pitfall. Enhancements will be made to future versions to give the same
flexibility without the deployment gotcha.
</p><p>
A couple of simple CALC PV references could look like these that follow:
</p><pre class="programlisting">   CALC\sum(pv1, pv2)

   CALC\diff(pv1, 10.5)
</pre><p>The above definitions will produce new PVs containing the
values pv1+pv2
and pv1-pv2 respectively. For example, if value1 and value2 are the
names
of two EPICS PVs, and an edm widget references the name
CALC\sum(value1,value2), then a new PV will be created containing the
value value1+value2.
</p><p>
The file calc.list would look like this:
</p><pre class="programlisting">CALC1

# Example definition file for the CALC ProcessVariable
#
# First line "CALC1 ..." is magic and provides version number
# as well as EMACS mode with is not necessary
# but makes for - by definition - cool coloring
# when this file is edited in emacs.

# Empty lines and comments like these,
# beginning with '#', are ignored.
#
# Syntax for the rest of the file:
#
# &lt;name&gt;
# &lt;implementation&gt;
#
# The name is used to refer to a CALC PV as "CALC\name"
# or "CALC\name(argA, argB, argC, ...).
#
# Implementation is in EPICS CALC record syntax,
# with A, B, C, ... being variable names for the arguments.
#
#
# Note: arguments are not checked!
# If e.g. CALC\sum(a,b) requires two arguments,
# nonone cares if you provide 0, 2 or 5 arguments instead of 2.

# Example: CALC\sum(x, y) adds the arguments
sum
# Implementation:
A+B

# Example: CALC\diff(x, y) subtracts the arguments
diff
# Implementation:
A-B

</pre><p>
One serious shortcoming of this strategy is the requirement to restart
edm whenever the calculation file is modified.
</p><p>
Calculation PVs may be created on-the-fly,
independent of a calc.list file. The syntax extension uses curly braces
to enclose the expression.
</p><p>
The above CALC PVs could be equivalently declared as
</p><pre class="programlisting">   CALC\{A+B}(pv1, pv2)

   CALC\{A-B}(pv1, 10.5)
</pre><p>
In this case, no calculation file is necessary and new calculations may
be declared on-the-fly, with no need to restart edm.
</p><p>
The calc.list file may contain an additional
line per calculation that specifies how the argument list is to be
rewritten. This can simplify usage for certain cases. For example,
suppose a calculation always involves the value of a PV and its alarm
severity as follows:
</p><pre class="programlisting">  # CALC\valid(x, y) returns value if valid else -1
  valid
  # Implementation:
  B==0?A:-1
</pre><p>
The previous method for defining a pv for this calculation requires
two arguments as the following example illustrates:
</p><pre class="programlisting">  CALC\valid(pv1,pv1.SEVR)
</pre><p>
The new feature permits the calculation to be specified thus:
</p><pre class="programlisting">  # CALC\valid(x) returns value if valid else -1
  valid
  # The next line generates two arguments from one
  @$(A),$(A).SEVR
  # Implementation:
  B==0?A:-1
</pre><p>
The implementaion is the same, but the pv is declared as
</p><pre class="programlisting">  CALC\valid(pv1)
</pre><p>
In this case, A is rewritten as A and B as A.SEVR giving
CALC\valid(pv1,pv1.SEVR).
</p><p>
This may also be useful when a naming convention is used to describe a group
of pvs associated with a device. For example, if two instances of a device
are associated with the following groups of PVs
</p><pre class="programlisting">  dev1:vReading
  dev1:iReading
  dev1:tempReading

  dev2:vReading
  dev2:iReading
  dev2:tempReading
</pre><p>
and a color rule is used to indicate the state of the device, then the
following old style calc PV definition, given as
</p><pre class="programlisting">  CALC\deviceState(dev1:vReading,dev1:iReading,dev1:tempReading)

  CALC\deviceState(dev2:vReading,dev2:iReading,dev2:tempReading)
</pre><p>
might be replaceable by
</p><pre class="programlisting">  CALC\deviceState(dev1)

  CALC\deviceState(dev2)
</pre></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3502931"></a>Local - Prefix = LOC\</h3></div></div></div><p>
Local PVs are internal to edm and must include the <span class="emphasis"><em>LOC\</em></span> prefix. For example,
a legal LOC PV name is LOC\somePv=&lt;type&gt;:&lt;value&gt; (e.g. LOC\somePv=d:1.234).
</p><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="id3503123"></a>Specifying local PVs</h4></div></div></div><p>
Local PV types are double (d), integer (i), enumerated (e), and string (s). Example
declarations are shown below.
</p><div class="itemizedlist"><ul type="disc"><li><p>
LOC\realPv=d:1.234
</p></li><li><p>
LOC\intPv=i:55
</p></li><li><p>
LOC\stringPv=s:this is a string
</p></li><li><p>
LOC\enumPv=e:0,zero,one,two (initial value is "zero")
</p></li><li><p>
LOC\enumPv=e:1,zero,one,two (initial value is "one")
</p></li><li><p>
LOC\enumPv=e:2,zero,one,two (initial value is "two")
</p></li></ul></div><p>
Edm creates a local PV the first time it is encountered. If types or values differ
between two declarations, the first one wins. To ensure predictable beavior, the declarations
must be identical.
</p></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="id3503198"></a>Scope</h4></div></div></div><p>
The default scope of a local PV is global. By default, the PV is visible from all windows on
all X displays managed by a given instance of edm. The scope may be limited to a single
X display (application context) or to a single window. The following examples show how
this may be accomplished.
</p><div class="itemizedlist"><ul type="disc"><li><p>
LOC\$(!A)realPvDisplayScope=d:1.234
</p></li><li><p>
LOC\$(!W)realPvWindowScope=d:1.234
</p></li></ul></div></div><div class="sect3" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="id3503227"></a>Special Functions</h4></div></div></div><p>
The following special functions are available.
</p><div class="itemizedlist"><ul type="disc"><li><p>
RAND() - returns random value between [0.0,1.0) for a double type ( e.g. LOC\randPv=d:RAND() )
</p></li></ul></div></div></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="Creating-and-Editing-Display-Windows"></a>Chapter�7.�Creating and Editing Display Windows</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#id3503268">File Operations</a></span></dt><dd><dl><dt><span class="sect2"><a href="#id3503282">Setting the Default Working Directory</a></span></dt><dt><span class="sect2"><a href="#id3503287">Creating a New Display File</a></span></dt><dt><span class="sect2"><a href="#id3503305">Opening an Existing Display File</a></span></dt></dl></dd><dt><span class="sect1"><a href="#id3503355">Using the Mouse</a></span></dt><dd><dl><dt><span class="sect2"><a href="#id3503369">Some Definitions</a></span></dt><dt><span class="sect2"><a href="#id3503432">Simple Select Operations</a></span></dt><dt><span class="sect2"><a href="#id3503473">Multiple Select Operations</a></span></dt><dt><span class="sect2"><a href="#id3503513">Create/Edit Operations</a></span></dt><dt><span class="sect2"><a href="#id3503559">Move and Resize Operations</a></span></dt><dt><span class="sect2"><a href="#id3503611">Execute Mode Operations</a></span></dt></dl></dd><dt><span class="sect1"><a href="#id3503646">Display Window Attributes</a></span></dt><dt><span class="sect1"><a href="#id3503704">Creating Objects (except lines)</a></span></dt><dt><span class="sect1"><a href="#id3503733">Editing Objects (except lines)</a></span></dt><dt><span class="sect1"><a href="#id3503777">Creating Line Objects</a></span></dt><dt><span class="sect1"><a href="#id3503859">Editing Line Objects</a></span></dt><dt><span class="sect1"><a href="#id3503889">Aligning Objects</a></span></dt><dt><span class="sect1"><a href="#id3503993">Miscellaneous Operations</a></span></dt></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3503268"></a>File Operations</h2></div></div></div><p>
See edm online help topic <span class="emphasis"><em>File Operations</em></span> for more
information.
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3503282"></a>Setting the Default Working Directory</h3></div></div></div><p>
When edl files are opened or saved, the operation is usually performed
in one of the directories listed in the EDMDATAFILES environment variable.
Initially, the default file selection dialog directory is set to the first
directory given in EDMDATAFILES. This default may be changed by making
a selection from the <span class="emphasis"><em>Path</em></span> menu (on the main window).
The menu contains each directory in EDMDATAFILES.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3503287"></a>Creating a New Display File</h3></div></div></div><p>
Creating a new edl file is simple. In the main window, select
<span class="emphasis"><em>New</em></span> from the <span class="emphasis"><em>File</em></span> menu.
A new window is created which may be resized as desired.
</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3503305"></a>Opening an Existing Display File</h3></div></div></div><p>
In the main window, select
<span class="emphasis"><em>Open...</em></span> from the <span class="emphasis"><em>File</em></span> menu.
A file selection dialog pops up from which an edl file may be selected.
As mentioned previously, the default file selection directory may be set
using the <span class="emphasis"><em>Path</em></span> menu before the open operation is
performed. Once selected, the display window is opened and positioned at
the previously saved origin.
</p></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3503355"></a>Using the Mouse</h2></div></div></div><p>
See edm online help topic <span class="emphasis"><em>Mouse Operations</em></span> for more
information.
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3503369"></a>Some Definitions</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>Left B means left button, Right B means right button, etc.</p></li><li><p>Press means <span class="emphasis"><em>press and hold</em></span></p></li><li><p>Click means <span class="emphasis"><em>press and release</em></span></p></li><li><p>Drag means <span class="emphasis"><em>press and hold the button while moving the cursor</em></span></p></li><li><p>Shift middle B click means <span class="emphasis"><em>hold down the shift key and click the middle button</em></span></p></li></ul></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3503432"></a>Simple Select Operations</h3></div></div></div><p>Left B Click</p><div class="itemizedlist"><ul type="disc"><li><p>Select single object (deselect current)</p></li></ul></div><p>Shft-Left B Click</p><div class="itemizedlist"><ul type="disc"><li><p>Toggle selection (add to current select group)</p></li></ul></div><p>Ctrl-Left B Click</p><div class="itemizedlist"><ul type="disc"><li><p>Cycle single object selection</p><p><span class="emphasis"><em>This is especially useful for finding one object among
several stacked objects. Note that this only works when one
and only one object is selected.</em></span></p></li></ul></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3503473"></a>Multiple Select Operations</h3></div></div></div><p>Middle B drag select box from Top-L to Bot-R</p><div class="itemizedlist"><ul type="disc"><li><p>Select all enclosed</p></li></ul></div><p>Middle B drag select box from Bot-R to Top-L</p><div class="itemizedlist"><ul type="disc"><li><p>Select by corners</p></li></ul></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3503513"></a>Create/Edit Operations</h3></div></div></div><p>Left B drag and release</p><div class="itemizedlist"><ul type="disc"><li><p>Create new object</p></li></ul></div><p>Left Click on selected object(s)</p><div class="itemizedlist"><ul type="disc"><li><p>Edit object(s)</p></li></ul></div><p>Control Middle B drag over object</p><div class="itemizedlist"><ul type="disc"><li><p>Drag-and-Drop PV name</p></li></ul></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3503559"></a>Move and Resize Operations</h3></div></div></div><p>Left B drag interior</p><div class="itemizedlist"><ul type="disc"><li><p>Move object</p></li></ul></div><p>Left B drag control point</p><div class="itemizedlist"><ul type="disc"><li><p>Resize object</p></li></ul></div><p>Ctrl-Left B drag interior or control point</p><div class="itemizedlist"><ul type="disc"><li><p>Move object (prevent unintentional resize)</p><p><span class="emphasis"><em>This operation makes it possible to move very small objects.</em></span></p></li></ul></div></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3503611"></a>Execute Mode Operations</h3></div></div></div><p>Middle B drag over object</p><div class="itemizedlist"><ul type="disc"><li><p>Drag-and-Drop PV name</p></li></ul></div><p>Control Middle B click over object</p><div class="itemizedlist"><ul type="disc"><li><p>Drag/Display object properties</p></li></ul></div></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3503646"></a>Display Window Attributes</h2></div></div></div><p>
Various operations may be performed on edm displays and widgets
from menus that are called up by middle-clicking on the display background.
Three different menus are available depending on whether one, many, or
no widgets are currently selected.
</p><p>
To set display attributes, make sure no widgets are selected and then
middle-click on an edm display background. Select the <span class="emphasis"><em>Display
Properties</em></span> menu item.
</p><p>
Attributes include size and position, window title,
the display scheme (colors and fonts),
and several edit mode parameters (grip,snap...).
</p><p>
Note that some edit mode parameters are listed with a pair of
shortcut key labels in parentheses [e.g. Show Grid (G/g)]. The shortcut
keys set (uppercase) and clear (lowercase) the corresponding attribute
when the attributes dialog is not open.
</p><p>
The <span class="emphasis"><em>ID</em></span>, <span class="emphasis"><em>Activate Callback</em></span>, and
<span class="emphasis"><em>Deactivate Callback</em></span> attributes are not currently used.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3503704"></a>Creating Objects (except lines)</h2></div></div></div><p>
See edm online help topic <span class="emphasis"><em>Creating Objects</em></span> for more
information.
</p><p>
Objects (rectangles, meters, buttons, etc.) are created by left-dragging
a box on an edm display window background. The initial size of the object
is determined by the size of the box and when the left button is released,
a menu pops up listing available object types (graphics, monitors, controls).
Selecting a type calls up a sub-menu enumerating all available objects for
the selected type. Selecting an object closes the menu and calls up an
object property dialog box. After the object attributes are specified and the
OK button pressed, the dialog is closed and the object is created.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3503733"></a>Editing Objects (except lines)</h2></div></div></div><p>
See edm online help topic <span class="emphasis"><em>Editing Objects</em></span> for more
information.
</p><p>
Left-clicking on a selected object calls up the object property dialog box.
New users often associate this operation with a double-click. Avoid this
temptation. Although it is true that two successive left clicks will result
in an edit operation, the clicks must be separated by some amount of delay.
Object properties may be modified as desired. Pressing the Apply button applies
all modifications without closing the dialog box. Pressing OK applies
modifications and closes the dialog. Pressing Cancel closes the dialog
without applying modifications.
</p><p>
The functions performed by the OK, Apply, and Cancel buttons may also be
achieved by double clicking the left, center, and right mouse buttons
respectively. This may, at times, eliminate excessive mouse pointer movement.
</p><p>
If multiple objects are selected, clicking on one of them
opens the first property dialog box. When the OK button
is pressed, the property box for the next item is opened,
an so on, until each selected object has been processed.
The edit operation is terminated when all objects have been
visited or the Cancel button is pressed.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3503777"></a>Creating Line Objects</h2></div></div></div><p>
See edm online help topic <span class="emphasis"><em>Line Objects</em></span> for more
information.
</p><p>
Lines are created by left-dragging a box on an edm display window background
and choosing Lines from the Graphics sub-menu. Doing this calls up the
line object property dialog box. After the object attributes are specified
and the OK button pressed, the dialog is closed and the cursor changes
slightly. At this point, the following operations may be performed.
</p><div class="itemizedlist"><ul type="disc"><li><p>Left B click appends a new line segment end-point</p></li><li><p>Right B click inserts a line segment end-point after a reference end-point (mouse pointer must be on reference end-point)</p></li><li><p>Middle B drag moves segment end-points</p></li><li><p>Ctrl Right B click deletes a line segment end-point (mouse pointer must be on the end-point to be deleted)</p></li><li><p>Ctrl middle B click deletes the last line segment end-point</p></li><li><p>Shift Left B click or Left B double-click completes the create operation</p></li></ul></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3503859"></a>Editing Line Objects</h2></div></div></div><p>
See edm online help topic <span class="emphasis"><em>Line Objects</em></span> for more
information.
</p><p>
Clicking on a lone selected line object calls up a menu which provides
the option to edit line properties or line segments. If the properties
option is selected, editing proceeds in the same manner as that for any edm
object.
If the segments option is selected, the object property dialog is not called
up, instead, the line is redrawn with control points around each segment
end-point and all line create operations may be performed. The edit operation
is terminated in a manner similar to the create operation, i.e. with
a Shift Left B click or a Left B double-click. In addition, a Shift Right B
click aborts all modifications and terminates the edit.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3503889"></a>Aligning Objects</h2></div></div></div><p>
See edm online help topic <span class="emphasis"><em>Aligning Objects</em></span> for more
information.
</p><p>
When two or more objects are selected, various object alignment operations
may be performed by middle-clicking on the display window background and
selecting the desired operation from a menu.
The following operations are possible:
</p><p>Align Left, Right, Top, Bottom</p><div class="itemizedlist"><ul type="disc"><li><p>Aligns the specified edge of all objects with the most extreme
instance (leftmost, topmost, etc.)</p></li></ul></div><p>Center Vertical, Horizontal, Both</p><div class="itemizedlist"><ul type="disc"><li><p>
This operation uses the location of the first object selected as a reference
location. The operation is then performed in the context of this reference.
<span class="emphasis"><em>Center Vertical</em></span> centers all objects on an imaginary
vertical line passing through the center of the reference object.
<span class="emphasis"><em>Center Horizontal</em></span> centers all objects on an imaginary
horizontal line passing through the center of the reference object.
<span class="emphasis"><em>Center Both</em></span> centers all objects on an imaginary
point at the center of the reference object.
</p></li></ul></div><p>Size Height, Width, Height &amp; Width</p><div class="itemizedlist"><ul type="disc"><li><p>
This operation uses the dimensions of the first object selected as reference
dimensions. The operation is then performed in the context of this reference.
<span class="emphasis"><em>Size Height</em></span> sets the height of all selected objects
the same as the reference height. The remaining operations work in a
similar manner.
</p></li></ul></div><p>Distribute Vertical, Horizontal, Midpoint Vertical, Midpoint Horizontal, 2D</p><div class="itemizedlist"><ul type="disc"><li><p>
This operation uses the location of the first object selected as a reference
location. The operation is then performed in the context of this reference.
<span class="emphasis"><em>Distribute Vertical</em></span> distributes all selected objects
along an imaginary vertical line passing through the center of the
reference object with equal space between the edges of successive objects.
<span class="emphasis"><em>Distribute Midpoint Vertical</em></span> distributes all selected
objects along an imaginary vertical line passing through the center of the
reference object with equal space between the midpoints of successive objects.
<span class="emphasis"><em>Distribute Horizontal</em></span> and
<span class="emphasis"><em>Distribute Midpoint Horizontal</em></span> work in a similar fashion.
<span class="emphasis"><em>Distribute 2D</em></span> does not use a reference location. Instead,
all selected objects are distributed in a row/column format using the smallest
imaginary box that would contain all selected objects. The objects are
distributed with equal space between the edges of successive objects.
</p></li></ul></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3503993"></a>Miscellaneous Operations</h2></div></div></div><p>
Other operations that may be performed from the display window menus are
listed below.
</p><p>Execute</p><div class="itemizedlist"><ul type="disc"><li><p>
Put display in execute mode. This is discussed at greater length in a
later section of this document.
</p></li></ul></div><p>Save</p><div class="itemizedlist"><ul type="disc"><li><p>
Save current display using existing file name.
</p></li></ul></div><p>Save As...</p><div class="itemizedlist"><ul type="disc"><li><p>
Save current display using specified file name (file might not yet exist).
</p></li></ul></div><p>Save To Current Path</p><div class="itemizedlist"><ul type="disc"><li><p>
Save current display to last directory specified by
<span class="emphasis"><em>path</em></span> menu item. This enables a
read-only display to be saved into a directory in which
write access is permitted.
</p></li></ul></div><p>Select All</p><div class="itemizedlist"><ul type="disc"><li><p>
Select all objects on the display.
</p></li></ul></div><p>Copy</p><div class="itemizedlist"><ul type="disc"><li><p>
Copy all selected objects to the clipboard.
</p></li></ul></div><p>Cut</p><div class="itemizedlist"><ul type="disc"><li><p>
Cut all selected objects to the clipboard.
</p></li></ul></div><p>Paste</p><div class="itemizedlist"><ul type="disc"><li><p>
Paste objects in the clipboard to the current display using the current
mouse location. Objects may be copied from one display window and pasted
into another that is managed by the same edm process.
</p></li></ul></div><p>Paste in Place</p><div class="itemizedlist"><ul type="disc"><li><p>
Paste in the clipboard to the current display using the exact location
of the original copied objects. This is usually used in conjunction
with the <span class="emphasis"><em>Orthogonal Move</em></span> mode to create arrays
of objects that are being manually aligned.
</p></li></ul></div><p>Close</p><div class="itemizedlist"><ul type="disc"><li><p>
Close the current display window.
</p></li></ul></div><p>Open...</p><div class="itemizedlist"><ul type="disc"><li><p>
Open a new display file and create a new window.
</p></li></ul></div><p>Load Display Scheme...</p><div class="itemizedlist"><ul type="disc"><li><p>
Load a new display scheme file (which changes the display attribute
colors and fonts).
</p></li></ul></div><p>Save Display Scheme...</p><div class="itemizedlist"><ul type="disc"><li><p>
Save current display colors and fonts as a display scheme file.
</p></li></ul></div><p>Edit Outliers</p><div class="itemizedlist"><ul type="disc"><li><p>
Find widgets located outside the dimensions of the curreny display
window and edit the first one found.
</p></li></ul></div><p>Find Main Window</p><div class="itemizedlist"><ul type="disc"><li><p>
Find, deiconify if necessary, and raise the edm main window. Some window
managers iconify the window if it is currently on the desktop so this
operation may have to be performed twice.
</p></li></ul></div><p>Refresh</p><div class="itemizedlist"><ul type="disc"><li><p>
Redraw entire contents of display window.
</p></li></ul></div><p>Help</p><div class="itemizedlist"><ul type="disc"><li><p>
Launch online help.
</p></li></ul></div><p>Raise</p><div class="itemizedlist"><ul type="disc"><li><p>
Raise stacking order of object(s) above all other objects.
</p></li></ul></div><p>Lower</p><div class="itemizedlist"><ul type="disc"><li><p>
Lower stacking order of object(s) below all other objects.
</p></li></ul></div><p>Group</p><div class="itemizedlist"><ul type="disc"><li><p>
Group all selected objects into a single composite object.
</p></li></ul></div><p>Ungroup</p><div class="itemizedlist"><ul type="disc"><li><p>
Ungroup a composite object.
</p></li></ul></div><p>Rotate Clockwise</p><div class="itemizedlist"><ul type="disc"><li><pre class="programlisting">*******             *************
*                          *    *
*                          *    *
*****    becomes           *    *
*                               *
*
*
</pre><p>
Not all objects may be rotated.
</p></li></ul></div><p>Rotate Counterclockwise</p><div class="itemizedlist"><ul type="disc"><li><pre class="programlisting">*******
*
*                   *
*****    becomes    *    *
*                   *    *
*                   *    *
*                   *************
</pre><p>
Not all objects may be rotated.
</p></li></ul></div><p>Flip Horizontally</p><div class="itemizedlist"><ul type="disc"><li><pre class="programlisting">*******             *******
*                         *
*                         *
******    becomes    ******
*                         *
*                         *
*******             *******
</pre><p>
Not all objects may be flipped.
</p></li></ul></div><p>Flip Vertically</p><div class="itemizedlist"><ul type="disc"><li><pre class="programlisting">*     *             *******
*     *             *     *
*     *             *     *
*     *    becomes  *     *
*     *             *     *
*     *             *     *
*******             *     *
</pre><p>
Not all objects may be flipped.
</p></li></ul></div><p>Edit Display Info</p><div class="itemizedlist"><ul type="disc"><li><p>
Calls up a dialog box in which color and font information
may be modified for all selected objects.
</p></li></ul></div><p>Edit PV Names</p><div class="itemizedlist"><ul type="disc"><li><p>
Calls up a dialog box in which PV names
may be modified for all selected objects.
</p></li></ul></div><p>Deselect</p><div class="itemizedlist"><ul type="disc"><li><p>
Deselects all selected objects.
</p></li></ul></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="Display-Execution"></a>Chapter�8.�Display Execution</h2></div></div></div><p>
To execute a newly created edm display window or one that has been opened
in edit mode, make sure no widgets are selected and then
middle-click on an edm display background. Select the
<span class="emphasis"><em>Execute</em></span> menu item.
</p><p>
In execute mode, edm connects to all PVs, creates and renders display widgets,
and presents a live update of all text and graphics content, changing displayed
values, colors, and images as the values of associated PVs change.
</p><p>
If edm is executed with the <span class="emphasis"><em>-x</em></span> option, all display
windows are opened in execute mode by default. Furthermore, if the
<span class="emphasis"><em>-noedit</em></span> option is specified, windows may not be
deactivated and placed in edit mode and new display windows may not be created.
</p></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="Macro-Symbols-and-Values"></a>Chapter�9.�Macro Symbols and Values</h2></div></div></div><p>
When edm is executed, a list of <span class="emphasis"><em>symbol=value</em></span> pairs may
be entered from the command line as follows:
</p><pre class="programlisting">  edm -m "sym1=val1,sym2=val2,sym3=val3..."
</pre><p>
These symbols may be referenced in the specification of certain object
properties by embedding a reference like
</p><pre class="programlisting">  $(symbol)
</pre><p>
into the property value string. A simple example will illustrate this.
</p><p>
Suppose edm was started as
</p><pre class="programlisting">   edm -m "1=one"
</pre><p>
This associates the value <span class="emphasis"><em>one</em></span> with symbol
<span class="emphasis"><em>1</em></span>. Now if an object property is specified as
</p><pre class="programlisting">   $(1)_two_three
</pre><p>
then, in execute mode, the property value would be expanded to
<span class="emphasis"><em>one_two_three</em></span>. Multiplexor objects can also affect the
value of symbols in execute mode and related display objects can pass
new symbols to child display windows.
</p><p>
Symbols are used to parameterize PV names and widget labels to build
a single template display window, multiple instances of which may be used in
systems containing arrays of similar subsystems.
</p></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="Internal-Symbols"></a>Chapter�10.�Internal Symbols</h2></div></div></div><p>
A set of internal symbols may be used by the related display widget and
the shell command widget. The related display widget may assign internal
symbol values to child macro arguments. The shell command widget may
likewise include internal symbols references in the shell command contents.
</p><p>
For example, one internal symbol is &lt;DSPNAME&gt; which translates to the
X Window display name.
</p><p>
The related display widget might include the following in the contents
of the <span class="emphasis"><em>macros</em></span> field:

</p><pre class="programlisting">  Dsp=&lt;DSPNAME&gt;
</pre><p>

</p><p>
The shell command widget might include the following in the contents
of the <span class="emphasis"><em>shell command</em></span> field:

</p><pre class="programlisting">  xterm -display &lt;DSPNAME&gt;
</pre><p>

</p><p>
The list of internal symbols are given below.
</p><p>&lt;WINID&gt;</p><p>
    The X Window ID - this is something you might use as shown below:
    </p><pre class="programlisting">xwd -id &lt;WINID&gt;
    </pre><p>
    </p><p>&lt;TITLE&gt;</p><p>
    Title of the edm display
    </p><p>&lt;HELPDIR&gt;</p><p>
    edm help file directory
    </p><p>&lt;DSPNAME&gt;</p><p>
    X Window display name
    </p><p>&lt;DSPID&gt;</p><p>
    X Window display name with each "." translated to a "-" (host:0.1 becomes host:0-1)
    </p><p>&lt;env:<span class="emphasis"><em>environment-variable-name&gt;</em></span></p><p>
    The contents of the associated environment variable
    </p><pre class="programlisting">for example, &lt;env:OSTYPE&gt; might translate to Linux
    </pre><p>
    </p></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="EDM-and-CVS"></a>Chapter�11.�EDM and CVS</h2></div></div></div><p>
EDM will display an embedded CVS revision in the title bar after the
file name. The CVS revision is contained in the file comment area and
is specified as shown in the following example:
</p><pre class="programlisting"># $Revision: 1.1.2 $
</pre><p>
This may initially be given as
</p><pre class="programlisting"># $Revision$
</pre><p>
CVS will expand this form to the one above it after a commit operation
is performed.
</p><p>
An edm comment template file may be utilized to insert comments into an
edl file when the file is saved by setting the environment variable
EDMCOMMENTS to the path of the template file. This provides a method
for automatically inserting the CVS <span class="emphasis"><em>Revision</em></span> symbol
into edl files when they are created. So that the template file comments
are inserted only once, edm prepends the following line to the comment
block:
</p><pre class="programlisting"># &lt;&lt;&lt;edm-generated-comments&gt;&gt;&gt;
</pre></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="remote-file-access"></a>Chapter�12.�Remote File Access</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#id3504744">
Introduction
</a></span></dt><dt><span class="sect1"><a href="#id3504746">
Example Configurations
</a></span></dt><dd><dl><dt><span class="sect2"><a href="#id3504852">
Example 1 - Simple Remote Access
</a></span></dt><dt><span class="sect2"><a href="#id3504887">
Example 2 - Remote File Access Only
</a></span></dt></dl></dd></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3504744"></a>
Introduction
</h2></div></div></div><p>
It is possible to run edm on a local cpu (e.g. from home) and access edl
files and some configuration files remotely (e.g. at work) from a web server.
If the associated EPICS PVs are
accessible through a channel access gateway, edm may be employed to
monitor/troubleshoot a live production system from a remote location.
</p><p>
This has been implemented in rather simple-minded manner to accomodate
a single user running edm from home in a technical support activity. If
more that one user are using the same local cpu to run edm in this manner,
each must set the environment variable EDMTMPFILES to a unique value.
</p><p>
You may also control the permissions of temporary files using the environment
variable EDMTMPUMASK.
</p><p>
==========================================================
</p><p>
BY DEFAULT EDM DOES NOT HAVE REMOTE FILE ACCESS CAPABILITY.
</p><p>
==========================================================
</p><p>
To verify the capability of a particular build instance, set the environment
variable EDMDEBUGMODE to 1 and run edm. If remote file access is turned on
the following will be displayed on stdout
</p><pre class="programlisting">Using curl for URL-based access
</pre><p>
If not, you will see
</p><pre class="programlisting">Using local access only
</pre><p>
To turn on remote file access, you must edit Makefile.Host in
$EPICS_EXTENSIONS/src/edm/lib. In addition, curl must be installed
on the build host and libcurl.so must be accessible.
</p><pre class="programlisting">For a linux build, add "-DUSECURL" to the line starting with

  USR_CXXFLAGS_Linux +=

and add "curl" to the line starting with

  USR_LIBS_Linux =

for example, change

  USR_CXXFLAGS_Linux += -Wall -D__linux__ -D_BSD_SOURCE \
  -DSINGLE_THREADED=1 -D__epics__=1

  USR_LIBS_Linux = Xm Xt Xp Xtst X11 pthread dl

to

  USR_CXXFLAGS_Linux += -Wall -DUSECURL -D__linux__ -D_BSD_SOURCE \
  -DSINGLE_THREADED=1 -D__epics__=1

  USR_LIBS_Linux = Xm Xt Xp Xtst X11 pthread dl curl

</pre><p>
After making this change, cd back to $EPICS_EXTENSIONS/src/edm and do
</p><pre class="programlisting">make clean

make
</pre></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3504746"></a>
Example Configurations
</h2></div></div></div><p>
There are two ways to access remote files. The first is the most simple and
makes it possible to add a remote location to the normal search paths. The
second replaces the entire file access environment and facilitates the case
where edm is being run from home, for example, to perform remote diagnostic
activities.
</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3504852"></a>
Example 1 - Simple Remote Access
</h3></div></div></div><p>
One way of accessing edl files on a remote http server is simply by adding
a URL to the environment EDMDATAFILES. This works for EDMFILES too, but EDMFILES
points to a single location.
</p><p>
For example, setting EDMDATAFILES as show below
</p><p>
export EDMDATAFILES=/top/one:/top/two:http://remoteNode/remoteTop/one
</p><p>
results in the following locations being searched when a file open is attempted:
</p><pre class="programlisting">  /top/one

  /top/two

  http://remoteNode/remoteTop/one
</pre></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id3504887"></a>
Example 2 - Remote File Access Only
</h3></div></div></div><p>
In this example, file access is exclusively remote and local access
is possible only by including the "file://" prefix in some URL.
</p><p>
Given:
</p><pre class="programlisting">The files colors.list and fonts.list accessible via web server from
http://www.webserver.com/files/

Several edl files accessible via web server from
http://www.webserver.com/edlFiles/

Help files accessible via web server from
http://www.webserver.com/helpFiles/

Local edm print definition file is /edm/edmPrintDef

Local collection of .edl files in /edm/localEdlFiles
</pre><p>
Define the following environment variables as shown below (bash syntax shown).
</p><pre class="programlisting">export EDMHTTPDOCROOT="http://www.webserver.com|file:///"

export EDMFILES=/files

export EDMDATAFILES=/edlFiles:/edm/localEdlFiles

export EDMHELPFILES=/helpFiles

export EDMPRINTDEF=/edm/edmPrintDef
</pre><p>
When edm is executed, locations are searched for .edl files in the following
order:
</p><pre class="programlisting">1) http://www.webserver.com/edlFiles

2) /edlFiles

3) http://www.webserver.com/edm/localEdlFiles

4) /edm/localEdlFiles
</pre><p>
If you have trouble, set the environment variable EDMDEBUGMODE to 1 and
run edm once again. You may thus observe server, directory, and file names
as edm searches for valid data sources.
</p><p>
When edm is run in this manner, performing interactive file open
operations will result in some directories being invalid. The file
selection box does not support remote access.
</p><p>
Note that local access also requires a URL-based name, hence the second
document root specification
</p><pre class="programlisting">  file:///
</pre><p>
Many web servers may be employed in this scheme. The
environment variable EDMHTTPDOCROOT is a list of locations separated
by the "|" character. The following example is legal:
</p><pre class="programlisting">export EDMHTTPDOCROOT="http://web1.com|http://web2.com|http://web3.com"
</pre></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="input-filters"></a>Chapter�13.�Input Filters</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#id3504981">
Introduction
</a></span></dt><dt><span class="sect1"><a href="#id3505021">
File Format for edmFilters
</a></span></dt><dt><span class="sect1"><a href="#id3505051">
Executable Requirements
</a></span></dt></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3504981"></a>
Introduction
</h2></div></div></div><p>
In version 1-10-0p of edm, an input file filter mechanism was added which
enables edm to read foreign display files. Configuration
of this facility involves the following steps:
</p><div class="itemizedlist"><ul type="disc"><li><p>
Create and populate the file named edmFilters
</p></li><li><p>
Define the environment variable EDMFILTERS to point to the directory
in which edmFilters resides
</p></li><li><p>
Create or obtain an executable that performs the conversion from
the foreign file to an edm compatible file
</p></li></ul></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3505021"></a>
File Format for edmFilters
</h2></div></div></div><p>
The edmFilters file may contain multiple entries, one per line for each
file extension type. Comment and blank lines are not currently allowed.
</p><p>
One entry in edmFilters contains the foreign file extension and the conversion
command with its arguments. The input file name is given as the symbol %f
which is replaced by the actual name at run-time.
</p><pre class="programlisting">Example:

.adl adl2edl -rgb %f
.xml xml2edl %f
</pre><p>
In the preceeding, both adl2edl and xml2edl are assumed to reside within
the execution path.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3505051"></a>
Executable Requirements
</h2></div></div></div><p>
The executable must accept the input file name on the command line and must
send its output to stdout. Error messages should be written to stderr or
to a file.
</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="pv-actions"></a>Chapter�14.�PV Actions</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#id3505072">
Introduction
</a></span></dt><dt><span class="sect1"><a href="#id3505115">
pvActions File Format
</a></span></dt></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3505072"></a>
Introduction
</h2></div></div></div><p>
Actions are related processes that are executed from edm. Parameters such as
the pv name and display name may be passed to the process as command line
arguments.
</p><p>
Moving the mouse over an edm widget and clicking the shift-ctrl-middle button
brings up an action menu. Selecting a menu item causes that action to be
performed.
</p><p>
To enable this facility, do the following:
</p><div class="itemizedlist"><ul type="disc"><li><p>
Create and populate the file named edmActions
</p></li><li><p>
Define the environment variable EDMACTIONS to point to the directory in which edmActions resides
</p></li></ul></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3505115"></a>
pvActions File Format
</h2></div></div></div><p>
Actions are specified one per line in the form action-name action-command.
</p><p>
White space is not allowed in action-name; action-command may contain any
amount of whitespace.
</p><pre class="programlisting">Example contents:

Probe probe -display $(display) $(pv)
StripTool /scripts/runStripTool $(pv) $(display)
</pre><p>
-------------------------------------------------
</p><pre class="programlisting">runStripTool script:

#!/bin/bash

uuid="`uuidgen`"
f="/tmp/$uuid"
echo "StripConfig 1.2" &gt; $f
echo "Strip.Time.Timespan 300" &gt;&gt; $f
echo "Strip.Time.NumSamples 7200" &gt;&gt; $f
echo "Strip.Time.SampleInterval 1.000000" &gt;&gt; $f
echo "Strip.Time.RefreshInterval 1.000000" &gt;&gt; $f
echo "Strip.Color.Background 65535 65535 65535 " &gt;&gt; $f
echo "Strip.Color.Foreground 0 0 0 " &gt;&gt; $f
echo "Strip.Color.Grid 49087 49087 49087 " &gt;&gt; $f
echo "Strip.Color.Color1 0 0 65535 " &gt;&gt; $f
echo "Strip.Color.Color2 27499 36494 8995 " &gt;&gt; $f
echo "Strip.Color.Color3 42405 10794 10794 " &gt;&gt; $f
echo "Strip.Color.Color4 24415 40606 41120 " &gt;&gt; $f
echo "Strip.Color.Color5 65535 42405 0 " &gt;&gt; $f
echo "Strip.Color.Color6 41120 8224 61680 " &gt;&gt; $f
echo "Strip.Color.Color7 65535 0 0 " &gt;&gt; $f
echo "Strip.Color.Color8 65535 55255 0 " &gt;&gt; $f
echo "Strip.Color.Color9 48316 36751 36751 " &gt;&gt; $f
echo "Strip.Color.Color10 39578 52685 12850 " &gt;&gt; $f
echo "Strip.Option.GridXon 1" &gt;&gt; $f
echo "Strip.Option.GridYon 1" &gt;&gt; $f
echo "Strip.Option.AxisYcolorStat 1" &gt;&gt; $f
echo "Strip.Option.GraphLineWidth 2" &gt;&gt; $f
echo "Strip.Curve.0.Name ${1}" &gt;&gt; $f
echo "Strip.Curve.0.Min `caget -t ${1}.LOPR`" &gt;&gt; $f
echo "Strip.Curve.0.Max `caget -t ${1}.HOPR`" &gt;&gt; $f
echo "Strip.Curve.0.Scale 0" &gt;&gt; $f
echo "Strip.Curve.0.PlotStatus 1" &gt;&gt; $f

StripTool $f

rm $f
</pre></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="pv-put-logging"></a>Chapter�15.�PV Put Logging</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#id3505173">
Introduction
</a></span></dt><dt><span class="sect1"><a href="#id3505213">
Logging all PVs by default
</a></span></dt><dt><span class="sect1"><a href="#id3505288">
Logging specified PVs
</a></span></dt></dl></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3505173"></a>
Introduction
</h2></div></div></div><p>
The ability to log EPICS PV writes from edm widgets is avalaible in
version 1-11-1o and above. Two procedures are given below to illustrate
how logging may be enabled. When enabled, edm writes information to a
pipe on each EPICS put. For a local connection, this produces something
like
</p><pre class="programlisting">user="sinclair" host="edmhost" dsp=":0.0" name="sinclairHost:ao0"...
... old="0.000000" new="1.000000"
</pre><p>
For a remote ssh connection (remote host 192.168.1.1, local host is 192.168.1.2)
</p><pre class="programlisting">user="sinclair" host="edmhost" ssh="::ffff:192.168.1.1 39719 ::ffff:192.168.1.2 22"...
... dsp=":10.0" name="sinclairHost:ao0" old="0.000000" new="1.000000"
</pre><p>
You must write an application that reads stdin, parses the above information, and writes
to your log (file, db, etc.). During development/debugging, you may use cat or tee.
</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3505213"></a>
Logging all PVs by default
</h2></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>Set environment variable EDMCLEAREPICSDEFAULT to 1 (this
accomodates potentially incompatible content in old screen files)</p></li><li><p>Set environment variable EDMPUTLOGGER to the location of your logger application
(cat will write the raw information to stdout, tee will write to a file and stdout)</p><pre class="programlisting">For example:
export EDMPUTLOGGER=cat
  or
export EDMPUTLOGGER="tee log.out"
</pre></li><li><p>Make the default pv type "LOG" in the file edmPvObjects</p><p>For example, for the following edmPvobjects file contents,
change</p><pre class="programlisting">3
EPICS /someLocation/libEpics.so EPICS PV
LOC /someLocation/libLoc.so Local PV
CALC /someLocation/libCalc.so Calculation PV</pre>
to
<pre class="programlisting">4
LOG /someLocation/libLog.so LOG PV
EPICS /someLocation/libEpics.so EPICS PV
LOC /someLocation/libLoc.so Local PV
CALC /someLocation/libCalc.so Calculation PV</pre></li><li><p>All EPICS PVs with names containing no explicit type will be logged with this configuration.
EPICS PVs named EPICS\pvname will not be logged.</p></li></ul></div></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both;"><a name="id3505288"></a>
Logging specified PVs
</h2></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>Set environment variable EDMPUTLOGGER to the location of your logger application
(cat will write the raw information to stdout, tee will write to a file and stdout)</p><pre class="programlisting">For example:
export EDMPUTLOGGER=cat
  or
export EDMPUTLOGGER="tee log.out"
</pre></li><li><p>Add the "LOG" pv type to the file edmPvObjects but retain "EPICS"
as the default type</p><p>For example, for the following edmPvobjects file contents,
change</p><pre class="programlisting">3
EPICS /someLocation/libEpics.so EPICS PV
LOC /someLocation/libLoc.so Local PV
CALC /someLocation/libCalc.so Calculation PV</pre>
to
<pre class="programlisting">4
EPICS /someLocation/libEpics.so EPICS PV
LOG /someLocation/libLog.so LOG PV
LOC /someLocation/libLoc.so Local PV
CALC /someLocation/libCalc.so Calculation PV</pre></li><li><p>EPICS PVs with names containing no explicit type will not be logged with this configuration.
PVs named LOG\pvname will be logged.</p></li></ul></div><p>

</p></div></div></div></body></html>E$      VDVVDX;W%   H:https://www.slac.stanford.edu/grp/cd/soft/epics/extensions/edm/edm.html necko:classified 1 security-info FnhllAKWRHGAlo+ESXykKAAAAAAAAAAAwAAAAAAAAEaphjojH6pBabDSgSnsfLHeAAQAAgAAAAAAAAAAAAAAAAAAAAAB4vFIJp5wRkeyPxAQ9RJGKPqbqVvKO0mKuIl8ec8o/uhmCjImkVxP+7sgiYWmMt8F+O2DZM7ZTG6GukivU8OT5gAAAAAAAATsMIIE6DCCA9CgAwIBAgIQKd9LH8ZCcXhVKR0GXOjKQzANBgkqhkiG9w0BAQsFADBBMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMdGhhd3RlLCBJbmMuMRswGQYDVQQDExJ0aGF3dGUgU1NMIENBIC0gRzIwHhcNMTUwNjExMDAwMDAwWhcNMTcwNjE3MjM1OTU5WjCBozELMAkGA1UEBhMCVVMxEzARBgNVBAgMCkNhbGlmb3JuaWExEzARBgNVBAcMCk1lbmxvIFBhcmsxLTArBgNVBAoMJFNMQUMgTmF0aW9uYWwgQWNjZWxlcmF0b3IgTGFib3JhdG9yeTEbMBkGA1UECwwSQ29tcHV0aW5nIERpdmlzaW9uMR4wHAYDVQQDDBV3d3cuc2xhYy5zdGFuZm9yZC5lZHUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC0iFacllPJDbSIcnQU5ygPw8nLOxarUN8nbAtSbV+LnAFPte53Tb3xIJROB0MCjksXhUe1F/G8iqIxTIzZDXXkJI5ucw5kWmPBERwY9ubvZ0rItWQyQ0MjnB/j31MCMjIpDS7KYPHwGGUec5TaFIOLmtUr+4JrXLtfihadnlieHPDxR6wCjyoD0j24BvIMPUldUQhPktWd6GqwagzCSRMSCBuyETVVxetug6nzfzklnVZdTTJhkhWqoryPWAM4x8unT1w6xQd+lQWB3n/4QVYNaDbLo8v/hBPOxk/GbnSPoPCWIp3oGzB4NfuYIWkYQINga5TBVtZf8L1xT7i2pebpAgMBAAGjggF3MIIBczAgBgNVHREEGTAXghV3d3cuc2xhYy5zdGFuZm9yZC5lZHUwCQYDVR0TBAIwADBuBgNVHSAEZzBlMGMGBmeBDAECAjBZMCYGCCsGAQUFBwIBFhpodHRwczovL3d3dy50aGF3dGUuY29tL2NwczAvBggrBgEFBQcCAjAjDCFodHRwczovL3d3dy50aGF3dGUuY29tL3JlcG9zaXRvcnkwDgYDVR0PAQH/BAQDAgWgMB8GA1UdIwQYMBaAFMJPSFf80U+awF04fQ4F29kutVJgMCsGA1UdHwQkMCIwIKAeoByGGmh0dHA6Ly90ai5zeW1jYi5jb20vdGouY3JsMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjBXBggrBgEFBQcBAQRLMEkwHwYIKwYBBQUHMAGGE2h0dHA6Ly90ai5zeW1jZC5jb20wJgYIKwYBBQUHMAKGGmh0dHA6Ly90ai5zeW1jYi5jb20vdGouY3J0MA0GCSqGSIb3DQEBCwUAA4IBAQBAHF31JVWSpT6uPE/rkrG1xlaQrW8GB0ezedQSGOv+9QZF5jNQ7aE6jrw2FU8bswcxET3+07ZGBDF+t6z/HBWsClXl+UtTVFyjBT8N4rrddYk+4J4C9dxH1qkx8TMlqupmsWEwxXGYgUqkLNB2Civ2ZTIkBmhOgfilL6fDRhc6Ah24nRU/vt0hYD06B5G02nJTyLMxaQi804ojqVBxvw3iPv948dA2Aug3i5FJzaCGBCIFN++Ozf7dOE1mDzHJ5/tHAeZw9+3psx9z7uLlSBC2ECjGlxXYS0BqIf0LMayxO1HPYLNYmSdl3tprFdGakR3b6lq1Qb0WweRJ0sGN0kx/ADMAAQAAAAABAQAA request-method GET response-head HTTP/1.1 200 OK
Date: Thu, 12 Nov 2015 19:07:03 GMT
Server: Apache
Last-Modified: Thu, 05 Feb 2009 21:33:47 GMT
Etag: "37fc0b42-20d31-46232a8d104c1"
Accept-Ranges: bytes
Content-Length: 134449
Content-Type: text/html
 charset windows-1252 uncompressed-len 0 predictor::resource-count 7 predictor::https://www.slac.stanford.edu/grp/cd/soft/epics/extensions/edm/edm_files/fig1.jpg 1,1,1447355222,0 predictor::https://www.slac.stanford.edu/grp/cd/soft/epics/extensions/edm/edm_files/colorPalette.png 1,1,1447355222,0 predictor::https://www.slac.stanford.edu/grp/cd/soft/epics/extensions/edm/edm_files/colorMenu.png 1,1,1447355222,0 predictor::https://www.slac.stanford.edu/grp/cd/soft/epics/extensions/edm/edm_files/badFont.png 1,1,1447355222,0 predictor::https://www.slac.stanford.edu/grp/cd/soft/epics/extensions/edm/edm_files/goodFont.png 1,1,1447355222,0 predictor::https://www.slac.stanford.edu/grp/cd/soft/epics/extensions/edm/edm_files/printDialog.png 1,1,1447355222,0 predictor::https://www.slac.stanford.edu/grp/cd/soft/epics/extensions/edm/edm_files/displayScheme.png 1,1,1447355222,0  1